{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2927:function(e,t,a){var s=a(5),n=a(2928);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2928:function(e,t,a){(t=a(6)(!1)).push([e.i,\"/*\\n * Copyright (c) 2018-2020 Red Hat, Inc.\\n * This program and the accompanying materials are made\\n * available under the terms of the Eclipse Public License 2.0\\n * which is available at https://www.eclipse.org/legal/epl-2.0/\\n *\\n * SPDX-License-Identifier: EPL-2.0\\n *\\n * Contributors:\\n *   Red Hat, Inc. - initial API and implementation\\n */\\n\\n.mi1VGbF_EixMNK4Je4NhR li:first-child {\\n  margin-right: 0;\\n}\\n\\n.mi1VGbF_EixMNK4Je4NhR li:first-child a {\\n  margin-right: 8px;\\n}\\n\",\"\"]),t.locals={breadcrumb:\"mi1VGbF_EixMNK4Je4NhR\"},e.exports=t},2931:function(e,t,a){var s=a(5),n=a(2932);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2932:function(e,t,a){(t=a(6)(!1)).push([e.i,\".workspace-action-selector button {\\n  border-radius: 3px;\\n}\\n.workspace-action-selector ul {\\n  padding: 0;\\n}\\n\",\"\"]),e.exports=t},2933:function(e,t,a){var s=a(5),n=a(2934);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2934:function(e,t,a){(t=a(6)(!1)).push([e.i,\"/*\\n* Copyright (c) 2018-2020 Red Hat, Inc.\\n* This program and the accompanying materials are made\\n* available under the terms of the Eclipse Public License 2.0\\n* which is available at https://www.eclipse.org/legal/epl-2.0/\\n*\\n* SPDX-License-Identifier: EPL-2.0\\n*\\n* Contributors:\\n*   Red Hat, Inc. - initial API and implementation\\n*/\\n\\n._2XkXmxzdwwfCqbQ_CYWazm {\\n  max-width: 350px;\\n  margin-right: 10px;\\n}\\n\\n.ORAly54H50hxWtHqj3N4R {\\n  color: #f37943;\\n  font-size: 0.8em;\\n}\\n\\n.KSpqVbrD1BZDR5U6NYlrh {\\n  margin-left: 5px;\\n  padding: 0;\\n  outline: none;\\n}\\n\\nbutton.KSpqVbrD1BZDR5U6NYlrh {\\n  color: inherit;\\n}\\n\\n._2bPaM0UNQ-urvQFlByCSrA {\\n  position: relative;\\n  top: 2px;\\n  color: #3083d6;\\n}\\n\\n._2bPaM0UNQ-urvQFlByCSrA button {\\n  bottom: 1px;\\n  margin-left: 3px;\\n}\\n\\n._2xx21c3J1wSeeeNBPxtkfu h4 {\\n  margin-top: 0;\\n}\\n\\n._1Mju5YLnjOPUUcRJFEsOMl {\\n  min-width: 800px;\\n}\\n\\n._1Mju5YLnjOPUUcRJFEsOMl footer button {\\n  margin: 0 0 10px 10px;\\n}\\n\",\"\"]),t.locals={storageTypeSelector:\"_2XkXmxzdwwfCqbQ_CYWazm\",experimentalStorageType:\"ORAly54H50hxWtHqj3N4R\",labelIcon:\"KSpqVbrD1BZDR5U6NYlrh\",storageType:\"_2bPaM0UNQ-urvQFlByCSrA\",warningAlert:\"_2xx21c3J1wSeeeNBPxtkfu\",modalEditStorageType:\"_1Mju5YLnjOPUUcRJFEsOMl\"},e.exports=t},2935:function(e,t,a){var s=a(5),n=a(2936);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2936:function(e,t,a){(t=a(6)(!1)).push([e.i,\"/*\\n* Copyright (c) 2018-2020 Red Hat, Inc.\\n* This program and the accompanying materials are made\\n* available under the terms of the Eclipse Public License 2.0\\n* which is available at https://www.eclipse.org/legal/epl-2.0/\\n*\\n* SPDX-License-Identifier: EPL-2.0\\n*\\n* Contributors:\\n*   Red Hat, Inc. - initial API and implementation\\n*/\\n\\n._1jBkzEoDStajYzALABAoYo {\\n  position: relative;\\n  top: 2px;\\n  color: #3083d6;\\n}\\n\\n._1jBkzEoDStajYzALABAoYo button {\\n  bottom: 1px;\\n  margin-left: 3px;\\n}\\n\\n._1VnvztCZK0MiTjJXOd96RM {\\n  max-width: 450px;\\n}\\n\",\"\"]),t.locals={name:\"_1jBkzEoDStajYzALABAoYo\",nameInput:\"_1VnvztCZK0MiTjJXOd96RM\"},e.exports=t},2937:function(e,t,a){var s=a(5),n=a(2938);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2938:function(e,t,a){(t=a(6)(!1)).push([e.i,\"/*\\n* Copyright (c) 2018-2020 Red Hat, Inc.\\n* This program and the accompanying materials are made\\n* available under the terms of the Eclipse Public License 2.0\\n* which is available at https://www.eclipse.org/legal/epl-2.0/\\n*\\n* SPDX-License-Identifier: EPL-2.0\\n*\\n* Contributors:\\n*   Red Hat, Inc. - initial API and implementation\\n*/\\n\\n._2LuNUT2SdEUeMA6o__FGWw {\\n  padding-top: 5px;\\n  line-height: 30px;\\n}\\n\",\"\"]),t.locals={kubernetesNamespace:\"_2LuNUT2SdEUeMA6o__FGWw\"},e.exports=t},2941:function(e,t,a){var s=a(5),n=a(2942);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2942:function(e,t,a){(t=a(6)(!1)).push([e.i,\".editor-tools {\\n  margin: 10px 0 5px;\\n  height: 20px;\\n}\\n.editor-tools > * {\\n  height: inherit;\\n  font-size: small;\\n  user-select: none;\\n  float: right;\\n}\\n.editor-tools a {\\n  text-decoration: none;\\n}\\n.editor-tools button {\\n  font-size: inherit;\\n  outline: none;\\n  padding: 0;\\n}\\n.editor-tools svg {\\n  margin-right: 8px;\\n}\\n\",\"\"]),e.exports=t},2943:function(e,t,a){var s=a(5),n=a(2944);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2944:function(e,t,a){(t=a(6)(!1)).push([e.i,\".workspace-details {\\n  height: calc(100vh - 380px);\\n  width: calc(100% - 10px);\\n}\\n.workspace-details-expanded {\\n  height: calc(100vh - 95px);\\n  width: calc(100% - 40px);\\n  position: absolute;\\n  top: 0;\\n}\\n.workspace-details,\\n.workspace-details-expanded {\\n  background: #fff;\\n}\\n.workspace-details .devfile-header,\\n.workspace-details-expanded .devfile-header {\\n  margin: 20px 0 5px;\\n  height: 20px;\\n  padding: 0;\\n}\\n.workspace-details .cancel-button,\\n.workspace-details-expanded .cancel-button {\\n  margin-right: 15px;\\n}\\n.workspace-details .save-button,\\n.workspace-details-expanded .save-button,\\n.workspace-details .cancle-button,\\n.workspace-details-expanded .cancle-button {\\n  float: right;\\n  margin-left: 5px;\\n}\\n\",\"\"]),e.exports=t},2945:function(e,t,a){var s=a(5),n=a(2946);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};s(n,r);e.exports=n.locals||{}},2946:function(e,t,a){(t=a(6)(!1)).push([e.i,\".workspace-details-tabs .pf-c-tab-content {\\n  outline: none;\\n}\\n.workspace-details-tabs .pf-c-tab-content .pf-c-form__label-text {\\n  cursor: initial;\\n}\\n.workspace-details-tabs .pf-c-tabs {\\n  padding-bottom: 0;\\n}\\n\",\"\"]),e.exports=t},2970:function(e,t,a){\"use strict\";a.r(t);var s=a(2904),n=a(1),r=a.n(n),i=a(59),o=a(2849),l=a(2830),c=a(2903),p=a(2857),h=a(2897),d=a(136),m=a(2831),g=a(2853),u=a(329),v=a(15),E=a(2850),f=a(2851),b=a(2871),y=a(2872),w=a(2869),S=a(2870),k=a(333),C=a(2927),T=a.n(C);class x extends r.a.PureComponent{render(){const{workspaceName:e,status:t,children:a,workspacesLink:s}=this.props;return r.a.createElement(o.a,{variant:o.b.light},r.a.createElement(E.a,{hasGutter:!0},r.a.createElement(f.a,null,r.a.createElement(w.a,{className:T.a.breadcrumb},r.a.createElement(S.a,{to:s},\"Workspaces\"),r.a.createElement(S.a,{isActive:!0},e))),r.a.createElement(f.a,null,r.a.createElement(b.a,null,r.a.createElement(y.a,{alignSelf:{default:\"alignSelfCenter\"}},r.a.createElement(m.a,null,r.a.createElement(g.a,{component:g.b.h1},e))),r.a.createElement(y.a,null,r.a.createElement(k.b,{status:t})),r.a.createElement(y.a,{align:{default:\"alignRight\"}},a)))))}}var O=x,R=a(2914),P=a(2835),D=a(2840),N=a(2908),_=a(2874),A=a(2919),I=(a(2931),a(2913)),M=a(23),j=a(116),L=a(2917),K=function(e,t,a,s){var n,r=arguments.length,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},W=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class q extends r.a.PureComponent{constructor(e){super(e),this.state={isExpanded:!1,isModalOpen:!1}}handleToggle(e){this.state.isModalOpen||this.setState({isExpanded:e})}async handleSelect(e,t){this.setState({isExpanded:!1});try{if(e===v.c.DELETE_WORKSPACE)try{await t.showConfirmation([this.props.workspaceName])}catch(e){return}const a=await t.handleAction(e,this.props.workspaceId);if(!a)return;this.props.history.push(a)}catch(t){const a=`Unable to ${e.toLocaleLowerCase()} ${this.props.workspaceName}. `+t.toString().replace(\"Error: \",\"\");this.showAlert(a),console.warn(a)}}showAlert(e){this.appAlerts.showAlert({key:\"workspace-details-\"+Object(L.a)(4),title:e,variant:s.b.warning})}getDropdownItems(e){const{status:t}=this.props;return[r.a.createElement(P.a,{key:\"action-\"+v.c.OPEN_IDE,onClick:async()=>this.handleSelect(v.c.OPEN_IDE,e)},r.a.createElement(\"div\",null,v.c.OPEN_IDE)),r.a.createElement(P.a,{key:\"action-\"+v.c.START_DEBUG_AND_OPEN_LOGS,isDisabled:t!==v.e[v.e.STOPPED],onClick:async()=>this.handleSelect(v.c.START_DEBUG_AND_OPEN_LOGS,e)},r.a.createElement(\"div\",null,v.c.START_DEBUG_AND_OPEN_LOGS)),r.a.createElement(P.a,{key:\"action-\"+v.c.START_IN_BACKGROUND,isDisabled:t!==v.e[v.e.STOPPED],onClick:async()=>this.handleSelect(v.c.START_IN_BACKGROUND,e)},r.a.createElement(\"div\",null,v.c.START_IN_BACKGROUND)),r.a.createElement(P.a,{key:\"action-\"+v.c.STOP_WORKSPACE,isDisabled:t===v.e[v.e.STOPPED],onClick:async()=>this.handleSelect(v.c.STOP_WORKSPACE,e)},r.a.createElement(\"div\",null,v.c.STOP_WORKSPACE)),r.a.createElement(P.a,{key:\"action-\"+v.c.DELETE_WORKSPACE,isDisabled:t===v.e[v.e.STARTING]||t===v.e[v.e.STOPPING],onClick:async()=>this.handleSelect(v.c.DELETE_WORKSPACE,e)},r.a.createElement(\"div\",null,v.c.DELETE_WORKSPACE))]}render(){const{workspaceId:e}=this.props,{isExpanded:t}=this.state;return r.a.createElement(A.a,null,r.a.createElement(I.a,null,a=>r.a.createElement(D.a,{className:\"workspace-action-selector\",toggle:r.a.createElement(N.a,{\"data-testid\":e+\"-action-dropdown\",onToggle:e=>this.handleToggle(e),toggleIndicator:_.a,isPrimary:!0},\"Actions\"),isOpen:t,position:\"right\",dropdownItems:this.getDropdownItems(a)})))}}K([Object(M.b)(j.a),W(\"design:type\",j.a)],q.prototype,\"appAlerts\",void 0);var U=a(2882),V=a(2876),B=a(2875),z=a(2877),F=a(2878),G=a(255),Y=a(256),H=a(2933),J=a.n(H);class X extends r.a.PureComponent{constructor(e){super(e),this.storageTypes=[],this.options=[],this.state={isSelectorOpen:!1,isInfoOpen:!1};const t=this.props.availableStorageTypes;Array.isArray(t)&&(this.storageTypes=t,this.storageTypes.forEach(e=>this.options.push(Y.e(e))));const a=this.props.preferredStorageType;a&&(this.preferredType=a)}componentDidUpdate(e){if(e.storageType!==this.props.storageType){const e=this.props.storageType;this.setState({selected:e})}}componentDidMount(){const e=this.props.storageType?this.props.storageType:this.preferredType;this.setState({selected:e})}handleEditToggle(e){this.setState({isSelectorOpen:e})}handleInfoToggle(){this.setState(({isInfoOpen:e})=>({isInfoOpen:!e}))}getExistingTypes(){return{hasAsync:this.storageTypes.some(e=>\"async\"===e),hasPersistent:this.storageTypes.some(e=>\"persistent\"===e),hasEphemeral:this.storageTypes.some(e=>\"ephemeral\"===e)}}getInfoModalContent(){const{hasAsync:e,hasPersistent:t,hasEphemeral:a}=this.getExistingTypes(),s=e?r.a.createElement(g.a,null,r.a.createElement(\"span\",{className:J.a.experimentalStorageType},\" Experimental feature \"),r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,\"Asynchronous Storage \"),\"is combination of Ephemeral and Persistent storages. It allows for faster I / O and keeps your changes, it does backup the workspace on stop and restores it on start.\"):\"\",n=t?r.a.createElement(g.a,null,r.a.createElement(\"b\",null,\"Persistent Storage\"),\" is slow I/O but persistent.\"):\"\",i=a?r.a.createElement(g.a,null,r.a.createElement(\"b\",null,\"Ephemeral Storage\"),\" allows for faster I/O but may have limited storage and is not persistent.\"):\"\",o=this.props.brandingStore.data.docs.storageTypes;return r.a.createElement(m.a,null,n,i,s,r.a.createElement(g.a,null,r.a.createElement(\"a\",{rel:\"noreferrer\",target:\"_blank\",href:o},\"Open documentation page\")))}getSelectorModal(){const{hasAsync:e,hasPersistent:t,hasEphemeral:a}=this.getExistingTypes(),{isSelectorOpen:n,selected:i}=this.state,o=this.props.storageType?this.props.storageType:this.preferredType,l=e?r.a.createElement(g.a,{component:g.b.h6},r.a.createElement(B.a,{label:\"Asynchronous\",name:\"asynchronous\",id:\"async-type-radio\",description:\"Asynchronous this is combination of Ephemeral and Persistent storage. Allows for faster I/O\\n         and keeps your changes, will backup on stop and restores on start.\",isChecked:\"async\"===i,onChange:()=>this.setState({selected:\"async\"})})):\"\",c=t?r.a.createElement(g.a,{component:g.b.h6},r.a.createElement(B.a,{label:\"Persistent\",name:\"persistent\",id:\"persistent-type-radio\",description:\"Persistent Storage slow I/O but persistent.\",isChecked:\"persistent\"===i,onChange:()=>this.setState({selected:\"persistent\"})})):\"\",p=a?r.a.createElement(g.a,{component:g.b.h6},r.a.createElement(B.a,{label:\"Ephemeral\",name:\"ephemeral\",id:\"ephemeral-type-radio\",description:\"Ephemeral Storage allows for faster I/O but may have limited storage and is not persistent.\",isChecked:\"ephemeral\"===i,onChange:()=>this.setState({selected:\"ephemeral\"})})):\"\";return r.a.createElement(h.a,{variant:h.b.small,isOpen:n,className:J.a.modalEditStorageType,title:\"Edit Storage Type\",onClose:()=>this.handleCancelChanges(),actions:[r.a.createElement(d.a,{key:\"confirm\",variant:\"primary\",isDisabled:o===i,onClick:()=>this.handleConfirmChanges()},\"Save\"),r.a.createElement(d.a,{key:\"cancel\",variant:\"secondary\",onClick:()=>this.handleCancelChanges()},\"Cancel\")]},r.a.createElement(m.a,null,r.a.createElement(s.a,{variant:s.b.warning,className:J.a.warningAlert,title:\"Note that after changing the storage type you may lose workspace data.\",isInline:!0}),r.a.createElement(g.a,{component:g.b.h6},\"Select the storage type\"),c,p,l))}handleConfirmChanges(){const e=this.state.selected;this.props.onSave&&this.props.onSave(e),this.setState({selected:e,isSelectorOpen:!1})}handleCancelChanges(){const e=this.props.storageType?this.props.storageType:this.preferredType;this.setState({selected:e}),this.handleEditToggle(!1)}render(){const{selected:e,isInfoOpen:t}=this.state;return r.a.createElement(V.a,{label:\"Storage Type\",fieldId:\"storage-type\",labelIcon:r.a.createElement(d.a,{variant:\"plain\",onClick:()=>this.handleInfoToggle(),className:J.a.labelIcon},r.a.createElement(z.a,null))},r.a.createElement(\"span\",{className:J.a.storageType},e,r.a.createElement(d.a,{variant:\"plain\",onClick:()=>this.handleEditToggle(!0)},r.a.createElement(F.a,null))),this.getSelectorModal(),r.a.createElement(h.a,{title:\"Storage Type info\",variant:h.b.small,isOpen:t,onClose:()=>{this.handleInfoToggle()}},this.getInfoModalContent()))}}var Q=Object(i.c)(e=>({brandingStore:e.branding,availableStorageTypes:Object(G.b)(e),preferredStorageType:Object(G.e)(e)}))(X),Z=a(53),$=a(2905),ee=a(2859),te=a(2879),ae=a(2880),se=a(2881),ne=a(2935),re=a.n(ne);class ie extends r.a.PureComponent{constructor(e){super(e),this.state={name:this.props.name,validated:Z.ValidatedOptions.default,isEditMode:!1},this.props.callbacks&&!this.props.callbacks.cancelChanges&&(this.props.callbacks.cancelChanges=()=>this.handleCancel())}componentDidUpdate(e){e.name!==this.props.name&&(this.validate(this.props.name),this.setState({name:this.props.name}),this.props.onChange&&this.props.onChange(this.props.name))}handleEditModeToggle(){this.setState(({isEditMode:e})=>({isEditMode:!e}))}handleChange(e){const t=e!==this.props.name;this.setState({name:e,hasChanges:t}),this.validate(e),this.props.onChange&&this.props.onChange(e)}validate(e){0!==e.length?0!==e.length&&e.length<3?this.setState({errorMessage:\"The name has to be at least 3 characters long.\",validated:Z.ValidatedOptions.error}):e.length>100?this.setState({errorMessage:\"The name is too long. The maximum length is 100 characters.\",validated:Z.ValidatedOptions.error}):!1!==new RegExp(\"^(?:[a-zA-Z0-9][-_.a-zA-Z0-9]{1,98}[a-zA-Z0-9])?$\").test(e)?this.setState({errorMessage:void 0,validated:Z.ValidatedOptions.success}):this.setState({errorMessage:\"The name can contain digits, latin letters, underscores and it should not contain special characters like space, dollar, etc. It should start and end only with digit or latin letter.\",validated:Z.ValidatedOptions.error}):this.setState({errorMessage:\"A value is required.\",validated:Z.ValidatedOptions.error})}async handleSave(){this.state.validated!==Z.ValidatedOptions.error&&(await this.props.onSave(this.state.name),this.setState({validated:Z.ValidatedOptions.default,hasChanges:!1})),this.handleEditModeToggle(),this.props.onChange&&this.props.onChange(this.props.name)}handleCancel(){this.setState({name:this.props.name,errorMessage:\"\",validated:Z.ValidatedOptions.default,hasChanges:!1}),this.handleEditModeToggle(),this.props.onChange&&this.props.onChange(this.props.name)}render(){const{name:e,errorMessage:t,validated:a,isEditMode:s}=this.state,n=this.state.validated===Z.ValidatedOptions.error||!this.state.hasChanges;return r.a.createElement(V.a,{label:\"Workspace Name\",isRequired:!0,fieldId:\"workspace-name\",helperTextInvalid:t,helperTextInvalidIcon:r.a.createElement(te.a,null),validated:a},!s&&r.a.createElement(\"span\",{className:re.a.name},e,r.a.createElement(d.a,{\"data-testid\":\"handle-edit-mode-toggle\",variant:\"plain\",onClick:()=>this.handleEditModeToggle()},r.a.createElement(F.a,null))),s&&r.a.createElement($.a,{className:re.a.nameInput},r.a.createElement(ee.a,{value:e,isRequired:!0,type:\"text\",id:\"workspace-name\",\"aria-describedby\":\"workspace-name-helper\",name:\"workspace-name\",validated:a,onChange:e=>this.handleChange(e),minLength:3,maxLength:100,placeholder:\"Enter a workspace name\"}),r.a.createElement(d.a,{variant:\"link\",\"data-testid\":\"handle-on-save\",isDisabled:n,onClick:()=>this.handleSave()},r.a.createElement(ae.a,null)),r.a.createElement(d.a,{variant:\"plain\",\"data-testid\":\"handle-on-cancel\",onClick:()=>this.handleCancel()},r.a.createElement(se.a,null))))}}var oe=a(2937),le=a.n(oe);class ce extends r.a.PureComponent{render(){return r.a.createElement(V.a,{label:\"Kubernetes Namespace\",fieldId:\"infrastructure-namespace\"},r.a.createElement(\"div\",{className:le.a.kubernetesNamespace},this.props.namespace))}}var pe=ce;class he extends r.a.Component{constructor(e){super(e),this.isWorkspaceNameChanged=!1,this.workspaceNameCallbacks={};const{workspace:t}=this.props,a=this.getStorageType(t.devfile),s=t.devfile.metadata.name?t.devfile.metadata.name:\"\",n=t.attributes&&t.attributes.infrastructureNamespace?t.attributes.infrastructureNamespace:\"\";this.state={storageType:a,workspaceName:s,namespace:n}}get hasChanges(){return this.isWorkspaceNameChanged}cancelChanges(){this.workspaceNameCallbacks.cancelChanges&&this.workspaceNameCallbacks.cancelChanges()}async handleWorkspaceNameSave(e){const t=Object.assign({},this.props.workspace.devfile);t.metadata.name=e,this.setState({workspaceName:e}),await this.onSave(t)}async handleStorageSave(e){const t=Object(Y.f)(this.props.workspace.devfile,e);this.setState({storageType:e}),await this.onSave(t)}getStorageType(e){if(e.attributes&&\"false\"===e.attributes.persistVolumes){return e.attributes&&\"true\"===e.attributes.asyncPersist?\"async\":\"ephemeral\"}return\"persistent\"}render(){const e=this.props.workspace.devfile,t=this.getStorageType(e),a=e.metadata.name?e.metadata.name:\"\",s=this.state.namespace,n=e.projects?e.projects.map(e=>e.name):[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{variant:o.b.light},r.a.createElement(U.a,{isHorizontal:!0,onSubmit:e=>e.preventDefault()},r.a.createElement(ie,{name:a,onSave:e=>this.handleWorkspaceNameSave(e),onChange:e=>{this.isWorkspaceNameChanged=a!==e},callbacks:this.workspaceNameCallbacks}),r.a.createElement(pe,{namespace:s}),r.a.createElement(Q,{storageType:t,onSave:e=>this.handleStorageSave(e)}),r.a.createElement(V.a,{label:\"Projects\",fieldId:\"projects\"},r.a.createElement(\"div\",{style:{paddingTop:\"5px\",lineHeight:\"30px\"}},n.join(\", \"))))))}async onSave(e){const t=Object.assign({},this.props.workspace);t.devfile=e,await this.props.onSave(t)}}var de=he,me=a(2907),ge=a(2920),ue=a(122),ve=a(89),Ee=a(2819),fe=a.n(Ee),be=a(2915);a(2941);class ye extends r.a.PureComponent{constructor(e){super(e),this.state={isExpanded:!1},this.handleExpand=()=>{if(this.state.isExpanded){window.postMessage(\"show-navbar\",\"*\");const e=!1;this.setState({isExpanded:e}),this.props.handleExpand(e)}else{window.postMessage(\"hide-navbar\",\"*\");const e=!0;this.setState({isExpanded:e}),this.props.handleExpand(e)}}}render(){const e=Object(be.b)(this.props.devfile),t=URL.createObjectURL(new Blob([e],{type:\"application/x-yaml\"}));let a;const s=()=>{this.setState({copied:!0}),a&&clearTimeout(a),a=setTimeout(()=>{this.setState({copied:!1})},3e3)};return r.a.createElement(\"div\",{className:\"editor-tools\"},r.a.createElement(b.a,null,r.a.createElement(y.a,null,r.a.createElement(fe.a,{text:e,onCopy:()=>s()},r.a.createElement(d.a,{variant:\"link\"},r.a.createElement(ve.CopyIcon,null),this.state.copied?\"Copied\":\"Copy to clipboard\"))),r.a.createElement(ue.a,{isVertical:!0}),r.a.createElement(y.a,null,r.a.createElement(\"a\",{download:\"devfile.yaml\",href:t},r.a.createElement(ve.DownloadIcon,null),\"Download\")),r.a.createElement(ue.a,{isVertical:!0}),r.a.createElement(y.a,null,r.a.createElement(d.a,{variant:\"link\",onClick:()=>this.handleExpand()},this.state.isExpanded?r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.CompressIcon,null),\"Compress\"):r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.ExpandIcon,null),\"Expand\")))))}}var we=ye,Se=(a(2943),a(80));class ke extends r.a.PureComponent{constructor(e){var t;super(e),this.state={devfile:Object.assign({},null===(t=this.props.workspace)||void 0===t?void 0:t.devfile),hasChanges:!1,isDevfileValid:!0,hasRequestErrors:!1,currentRequestError:\"\",isExpanded:!1},this.cancelChanges=()=>{var e;this.updateEditor(null===(e=this.props.workspace)||void 0===e?void 0:e.devfile),this.setState({hasChanges:!1,hasRequestErrors:!1,currentRequestError:\"\"})},this.devfileEditorRef=r.a.createRef()}init(){var e;const t=Object.assign({},null===(e=this.props.workspace)||void 0===e?void 0:e.devfile);!t||this.originDevfile&&this.isEqualObject(t,this.originDevfile)||(this.originDevfile=t,this.updateEditor(t),this.setState({hasRequestErrors:!1,currentRequestError:\"\",hasChanges:!1}))}componentDidMount(){this.init()}componentDidUpdate(){this.init()}render(){var e;const t=null===(e=this.props.workspace)||void 0===e?void 0:e.devfile,{devfile:a}=this.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(\"br\",null),this.state.currentRequestError&&r.a.createElement(s.a,{variant:s.b.danger,isInline:!0,title:this.state.currentRequestError,actionClose:r.a.createElement(l.a,{onClose:()=>this.setState({currentRequestError:\"\"})})}),r.a.createElement(m.a,{className:\"workspace-details\"+(this.state.isExpanded?\"-expanded\":\"\")},this.state.currentRequestError&&this.state.isExpanded&&r.a.createElement(me.a,{isToast:!0},r.a.createElement(s.a,{variant:s.b.danger,title:this.state.currentRequestError,actionClose:r.a.createElement(l.a,{onClose:()=>this.setState({currentRequestError:\"\"})})})),r.a.createElement(we,{devfile:a,handleExpand:e=>{this.setState({isExpanded:e})}}),r.a.createElement(ge.a,{ref:this.devfileEditorRef,devfile:t,decorationPattern:\"location[ \\\\t]*(.*)[ \\\\t]*$\",onChange:(e,t)=>{this.onDevfileChange(e,t)},isReadonly:Object(Se.c)(t)}),r.a.createElement(d.a,{onClick:()=>this.cancelChanges(),variant:\"secondary\",className:\"cancle-button\",isDisabled:!this.state.hasChanges&&this.state.isDevfileValid},\"Cancel\"),r.a.createElement(d.a,{onClick:async()=>await this.onSave(),variant:\"primary\",className:\"save-button\",isDisabled:!this.state.hasChanges||!this.state.isDevfileValid},\"Save\")))}updateEditor(e){var t;e&&(null===(t=this.devfileEditorRef.current)||void 0===t||t.updateContent(e),this.setState({isDevfileValid:!0}))}onDevfileChange(e,t){this.setState({isDevfileValid:t}),t?this.isEqualObject(this.props.workspace.devfile,e)?this.setState({hasChanges:!1}):(this.setState({devfile:e}),this.setState({hasChanges:!0,hasRequestErrors:!1})):this.setState({hasChanges:!1})}async onSave(){const e=this.state.devfile;if(!e)return;const t=Object.assign({},this.props.workspace);t.devfile=e,this.setState({hasChanges:!1});try{await this.props.onSave(t),this.setState({hasChanges:!1,hasRequestErrors:!1,currentRequestError:\"\"})}catch(e){const t=e.toString().replace(/^Error: /gi,\"\");this.setState({hasChanges:!0,hasRequestErrors:!0,currentRequestError:t})}}sortObject(e){return Object.keys(e).sort().reduce((t,a)=>(t[a]=e[a],t),{})}isEqualObject(e,t){return JSON.stringify(this.sortObject(e))==JSON.stringify(this.sortObject(t))}}var Ce=ke,Te=(a(2945),function(e,t,a,s){var n,r=arguments.length,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i}),xe=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Oe=o.b.light;class Re extends r.a.PureComponent{constructor(e){super(e),this.alert={},this.editorTabPageRef=r.a.createRef(),this.overviewTabPageRef=r.a.createRef(),this.state={activeTabKey:Re.activeTabKey?Re.activeTabKey:0,hasWarningMessage:!1,hasDiscardChangesMessage:!1},this.handleTabClick=(e,t)=>{var a,s;if(this.state.activeTabKey===v.d.Devfile&&(null===(a=this.editorTabPageRef.current)||void 0===a?void 0:a.state.hasChanges)||this.state.activeTabKey===v.d.Overview&&(null===(s=this.overviewTabPageRef.current)||void 0===s?void 0:s.hasChanges)||this.props.isLoading){const e=document.hasFocus()&&document.activeElement!==document.body&&document.activeElement!==document.documentElement&&document.activeElement||null;return e&&e.blur(),void(this.props.isLoading||this.setState({hasDiscardChangesMessage:!0,clickedTabIndex:t}))}this.setState({hasDiscardChangesMessage:!1,clickedTabIndex:t,activeTabKey:t}),Re.activeTabKey=t},this.showAlert=(e,t)=>{this.alert={variant:e,title:t};const a=\"wrks-details-\"+(\"0000\"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);this.appAlerts.showAlert({key:a,title:t,variant:e})}}componentDidUpdate(){var e;this.props.workspace&&v.e[null===(e=this.props.workspace)||void 0===e?void 0:e.status]===v.e.STOPPED&&this.setState({hasWarningMessage:!1})}handleDiscardChanges(){var e,t;this.state.activeTabKey===v.d.Devfile?null===(e=this.editorTabPageRef.current)||void 0===e||e.cancelChanges():this.state.activeTabKey===v.d.Overview&&(null===(t=this.overviewTabPageRef.current)||void 0===t||t.cancelChanges());const a=this.state.clickedTabIndex;this.setState({hasDiscardChangesMessage:!1,activeTabKey:a})}handleCancelChanges(){this.setState({hasDiscardChangesMessage:!1})}render(){const{workspace:e,workspacesLink:t}=this.props;if(!e)return r.a.createElement(\"div\",null,\"Workspace not found.\");const a=e.devfile.metadata.name?e.devfile.metadata.name:\"\";return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{pageName:a}),r.a.createElement(O,{workspacesLink:t,workspaceName:a,status:e.status},r.a.createElement(q,{workspaceId:e.id,workspaceName:a,status:e.status,history:this.props.history})),r.a.createElement(o.a,{variant:Oe,className:\"workspace-details-tabs\"},this.state.hasWarningMessage&&r.a.createElement(s.a,{variant:s.b.warning,isInline:!0,title:r.a.createElement(r.a.Fragment,null,\"The workspace \",r.a.createElement(\"em\",null,a,\" \"),\" should be restarted to apply changes.\"),actionClose:r.a.createElement(l.a,{onClose:()=>this.setState({hasWarningMessage:!1})})}),r.a.createElement(c.a,{activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},r.a.createElement(p.a,{eventKey:v.d.Overview,title:v.d[v.d.Overview]},r.a.createElement(R.a,{isLoading:this.props.isLoading}),r.a.createElement(de,{ref:this.overviewTabPageRef,workspace:e,onSave:e=>this.onSave(e)})),r.a.createElement(p.a,{eventKey:v.d.Devfile,title:v.d[v.d.Devfile]},r.a.createElement(R.a,{isLoading:this.props.isLoading}),r.a.createElement(Ce,{ref:this.editorTabPageRef,workspace:e,onSave:e=>this.onSave(e)}))),r.a.createElement(h.a,{variant:h.b.small,isOpen:this.state.hasDiscardChangesMessage,title:\"Unsaved Changes\",onClose:()=>this.handleCancelChanges(),actions:[r.a.createElement(d.a,{key:\"confirm\",variant:\"primary\",onClick:()=>this.handleDiscardChanges()},\"Discard Changes\"),r.a.createElement(d.a,{key:\"cancel\",variant:\"secondary\",onClick:()=>this.handleCancelChanges()},\"Cancel\")]},r.a.createElement(m.a,null,r.a.createElement(g.a,null,\"You have unsaved changes. You may go ahead and discard all changes, or close this window and save them.\")))))}async onSave(e){var t;this.props.workspace&&v.e[this.props.workspace.status]!==v.e.STOPPED&&this.setState({hasWarningMessage:!0}),await this.props.onSave(e),null===(t=this.editorTabPageRef.current)||void 0===t||t.cancelChanges()}}Te([Object(M.b)(j.a),xe(\"design:type\",j.a)],Re.prototype,\"appAlerts\",void 0);var Pe=Object(i.c)(e=>({isLoading:Object(G.c)(e),workspace:Object(G.h)(e)}),null,null,{forwardRef:!0})(Re),De=a(30),Ne=a(114),_e=a(113);class Ae extends r.a.PureComponent{constructor(e){super(e),this.workspaceDetailsPageRef=r.a.createRef();const t=this.props.match.params.namespace,a=this.props.match.params.workspaceName.split(\"&\")[0];if(a!==this.props.match.params.workspaceName){const e=`/workspace/${t}/${a}`;this.props.history.replace({pathname:e})}}async init(){const{match:{params:e},allWorkspaces:t,isLoading:a,requestWorkspaces:s,setWorkspaceId:n}=this.props;let r=null==t?void 0:t.find(t=>t.namespace===e.namespace&&t.devfile.metadata.name===e.workspaceName);a||r||(await s(),r=null==t?void 0:t.find(t=>t.namespace===e.namespace&&t.devfile.metadata.name===e.workspaceName)),r&&n(r.id)}componentDidMount(){var e;this.init();const t=null===(e=this.workspaceDetailsPageRef.current)||void 0===e?void 0:e.showAlert;this.showAlert=(e,a)=>{t?t(a||s.b.danger,e):console.error(e)}}componentDidUpdate(){var e;const t=this.props.match.params.namespace,a=this.props.match.params.workspaceName;(null===(e=this.props.allWorkspaces)||void 0===e?void 0:e.find(e=>e.namespace===t&&e.devfile.metadata.name===a))||this.props.isLoading||this.props.history.replace({pathname:\"/workspaces\"})}render(){const e=Object(Ne.g)(this.props.history,De.a.WORKSPACES);return r.a.createElement(Pe,{ref:this.workspaceDetailsPageRef,workspacesLink:e,onSave:e=>this.onSave(e),history:this.props.history})}async onSave(e){var t;const a=e.namespace,n=e.devfile.metadata.name;try{await this.props.updateWorkspace(e),this.showAlert(\"Workspace has been updated\",s.b.success);const t=`/workspace/${a}/${n}`;this.props.history.replace({pathname:t}),this.props.setWorkspaceId(e.id)}catch(e){if((null===(t=this.workspaceDetailsPageRef.current)||void 0===t?void 0:t.state.activeTabKey)===v.d.Devfile)throw new Error(e.toString().replace(/^Error: /gi,\"\"));this.showAlert(\"Failed to update workspace data\")}}}const Ie=Object(i.c)(e=>({isLoading:Object(G.c)(e),allWorkspaces:Object(G.a)(e)}),_e.a);t.default=Ie(Ae)}}]);","extractedComments":[]}