!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["workspace-client"]=t():e["workspace-client"]=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.w={},r(r.s=89)}([function(e,t,r){"use strict";var n=r(32),o=Object.prototype.toString;function s(e){return"[object Array]"===o.call(e)}function i(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function h(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:i,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):s(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)h(arguments[n],r);return t},extend:function(e,t,r){return h(t,function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("util")},function(e,t,r){var n=t.noop=function(){};function o(e,t,r){this.logFunction=r,this.identifier=e,this.uniqueID=t,this.buffer=[]}t.extend=function(e,t){for(var r in t)e[r]=t[r]},t.eventEmitterListenerCount=r(1).EventEmitter.listenerCount||function(e,t){return e.listeners(t).length},t.BufferingLogger=function(e,t){var s=r(9)(e);if(s.enabled){var i=new o(e,t,s),a=i.log.bind(i);return a.printOutput=i.printOutput.bind(i),a.enabled=s.enabled,a}return s.printOutput=n,s},o.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},o.prototype.clear=function(){return this.buffer=[],this},o.prototype.printOutput=function(e){e||(e=this.logFunction);var t=this.uniqueID;this.buffer.forEach(function(r){var n=r[0].toLocaleString(),o=r[1].slice(),s=o[0];void 0!==s&&null!==s&&(s="%s - %s - "+s.toString(),o.splice(0,1,s,n,t),e.apply(global,o))})}},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("http")},function(e,t,r){var n=r(2),o=r(3),s=r(1).EventEmitter,i=r(13),a=r(51),c=r(49).Validation;const u="open";var h="setImmediate"in global?global.setImmediate.bind(global):process.nextTick.bind(process),l=0;function f(e,t,r,n,c){if(this._debug=o.BufferingLogger("websocket:connection",++l),this._debug("constructor"),this._debug.enabled&&function(e,t){if(!e._debug.enabled)return;var r=t.emit;for(var n in t.emit=function(t){e._debug("||| Socket Event  '%s'",t),r.apply(this,arguments)},t)"function"==typeof t[n]&&-1===["emit"].indexOf(n)&&function(r){var n=t[r];t[r]="on"!==r?function(){return e._debug("||| Socket method called:  %s",r),n.apply(this,arguments)}:function(){return e._debug("||| Socket method called:  %s (%s)",r,arguments[0]),n.apply(this,arguments)}}(n)}(this,e),s.call(this),this._pingListenerCount=0,this.on("newListener",function(e){"ping"===e&&this._pingListenerCount++}).on("removeListener",function(e){"ping"===e&&this._pingListenerCount--}),this.config=c,this.socket=e,this.protocol=r,this.extensions=t,this.remoteAddress=e.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=n,this.maskBytes=new Buffer(4),this.frameHeader=new Buffer(10),this.bufferList=new a,this.currentFrame=new i(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=u,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if("number"!=typeof this.config.keepaliveInterval)throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if("number"!=typeof this.config.keepaliveGracePeriod)throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}function p(e){return!(e<1e3)&&(e>=1e3&&e<=2999?-1!==[1e3,1001,1002,1003,1007,1008,1009,1010,1011].indexOf(e):e>=3e3&&e<=3999||(e>=4e3&&e<=4999||!(e>=5e3)&&void 0))}f.CLOSE_REASON_NORMAL=1e3,f.CLOSE_REASON_GOING_AWAY=1001,f.CLOSE_REASON_PROTOCOL_ERROR=1002,f.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,f.CLOSE_REASON_RESERVED=1004,f.CLOSE_REASON_NOT_PROVIDED=1005,f.CLOSE_REASON_ABNORMAL=1006,f.CLOSE_REASON_INVALID_DATA=1007,f.CLOSE_REASON_POLICY_VIOLATION=1008,f.CLOSE_REASON_MESSAGE_TOO_BIG=1009,f.CLOSE_REASON_EXTENSION_REQUIRED=1010,f.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,f.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,f.CLOSE_DESCRIPTIONS={1000:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"},n.inherits(f,s),f.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},f.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),this.config.keepalive&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},f.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},f.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},f.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},f.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},f.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(f.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},f.prototype.handleSocketData=function(e){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(e),this.processReceivedData()},f.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),this.connected&&!this.inputPaused){var e=this.currentFrame;if(e.addData(this.bufferList)){var t=this;if(e.protocolError)return this._debug("-- protocol error"),void process.nextTick(function(){t.drop(f.CLOSE_REASON_PROTOCOL_ERROR,e.dropReason)});if(e.frameTooLarge)return this._debug("-- frame too large"),void process.nextTick(function(){t.drop(f.CLOSE_REASON_MESSAGE_TOO_BIG,e.dropReason)});if(e.rsv1||e.rsv2||e.rsv3)return this._debug("-- illegal rsv flag"),void process.nextTick(function(){t.drop(f.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")});this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick(function(){t.emit("frame",e)})),process.nextTick(function(){t.processFrame(e)}),this.currentFrame=new i(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&h(this.receivedDataHandler)}else this._debug("-- insufficient data for frame")}},f.prototype.handleSocketError=function(e){this._debug("handleSocketError: %j",e),this.closeReasonCode=f.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+e.syscall+" "+e.code,this.connected=!1,this.state="closed",this.fragmentationSize=0,o.eventEmitterListenerCount(this,"error")>0&&this.emit("error",e),this.socket.destroy(e),this._debug.printOutput()},f.prototype.handleSocketEnd=function(){this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,"closed"!==this.state?"peer_requested_close"!==this.state&&"ending"!==this.state&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end()):this._debug("  --- Socket 'end' after 'close'")},f.prototype.handleSocketClose=function(e){this._debug("handleSocketClose: received socket close"),this.socketHadError=e,this.connected=!1,this.state="closed",-1===this.closeReasonCode&&(this.closeReasonCode=f.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},f.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},f.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},f.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},f.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},f.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},f.prototype.close=function(e,t){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),"number"!=typeof e&&(e=f.CLOSE_REASON_NORMAL),!p(e))throw new Error("Close code "+e+" is not valid.");"string"!=typeof t&&(t=f.CLOSE_DESCRIPTIONS[e]),this.closeReasonCode=e,this.closeDescription=t,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state="ending",this.connected=!1}},f.prototype.drop=function(e,t,r){this._debug("drop"),"number"!=typeof e&&(e=f.CLOSE_REASON_PROTOCOL_ERROR),"string"!=typeof t&&(t=f.CLOSE_DESCRIPTIONS[e]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",r,e,t),this.closeReasonCode=e,this.closeDescription=t,this.frameQueue=[],this.fragmentationSize=0,r||this.sendCloseFrame(e,t),this.connected=!1,this.state="closed",this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},f.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},f.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},f.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state="closed",this.socket.end())},f.prototype.processFrame=function(e){if(this._debug("processFrame"),this._debug(" -- frame: %s",e),0!==this.frameQueue.length&&e.opcode>0&&e.opcode<8)this.drop(f.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+e.opcode.toString(16)+" received in middle of fragmented message.");else switch(e.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(e.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:e.binaryPayload})):(this.frameQueue.push(e),this.fragmentationSize=e.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(e.fin){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(f.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:e.binaryPayload.toString("utf8")})}else this.frameQueue.push(e),this.fragmentationSize=e.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(0===this.frameQueue.length)return void this.drop(f.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");if(this.fragmentationSize+=e.length,this.fragmentationSize>this.maxReceivedMessageSize)return void this.drop(f.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");if(this.frameQueue.push(e),e.fin){var t=0,r=new Buffer(this.fragmentationSize),n=this.frameQueue[0].opcode;switch(this.frameQueue.forEach(function(e){e.binaryPayload.copy(r,t),t+=e.binaryPayload.length}),this.frameQueue=[],this.fragmentationSize=0,n){case 2:this.emit("message",{type:"binary",binaryData:r});break;case 1:if(!c.isValidUTF8(r))return void this.drop(f.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.emit("message",{type:"utf8",utf8Data:r.toString("utf8")});break;default:return void this.drop(f.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+n.toString(16))}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var o=!1;this.emit("ping",function(){o=!0},e.binaryPayload),o||this.pong(e.binaryPayload)}else this.pong(e.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",e.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse)return this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state="closed",void this.socket.end();var s;if(this._debug("---- Closing handshake initiated by peer."),this.state="peer_requested_close",e.invalidCloseFrameLength?(this.closeReasonCode=1005,s=f.CLOSE_REASON_PROTOCOL_ERROR):-1===e.closeStatus||p(e.closeStatus)?(this.closeReasonCode=e.closeStatus,s=f.CLOSE_REASON_NORMAL):(this.closeReasonCode=e.closeStatus,s=f.CLOSE_REASON_PROTOCOL_ERROR),e.binaryPayload.length>1){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(f.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.closeDescription=e.binaryPayload.toString("utf8")}else this.closeDescription=f.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,e.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(s,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",e.opcode),this.drop(f.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+e.opcode.toString(16))}},f.prototype.send=function(e,t){if(this._debug("send"),Buffer.isBuffer(e))this.sendBytes(e,t);else{if("function"!=typeof e.toString)throw new Error("Data provided must either be a Node Buffer or implement toString()");this.sendUTF(e,t)}},f.prototype.sendUTF=function(e,t){e=new Buffer(e.toString(),"utf8"),this._debug("sendUTF: %d bytes",e.length);var r=new i(this.maskBytes,this.frameHeader,this.config);r.opcode=1,r.binaryPayload=e,this.fragmentAndSend(r,t)},f.prototype.sendBytes=function(e,t){if(this._debug("sendBytes"),!Buffer.isBuffer(e))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var r=new i(this.maskBytes,this.frameHeader,this.config);r.opcode=2,r.binaryPayload=e,this.fragmentAndSend(r,t)},f.prototype.ping=function(e){this._debug("ping");var t=new i(this.maskBytes,this.frameHeader,this.config);t.opcode=9,t.fin=!0,e&&(Buffer.isBuffer(e)||(e=new Buffer(e.toString(),"utf8")),e.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e),this.sendFrame(t)},f.prototype.pong=function(e){this._debug("pong");var t=new i(this.maskBytes,this.frameHeader,this.config);t.opcode=10,Buffer.isBuffer(e)&&e.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e,t.fin=!0,this.sendFrame(t)},f.prototype.fragmentAndSend=function(e,t){if(this._debug("fragmentAndSend"),e.opcode>7)throw new Error("You cannot fragment control frames.");var r=this.config.fragmentationThreshold,n=e.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||e.binaryPayload&&n<=r)return e.fin=!0,void this.sendFrame(e,t);for(var o=Math.ceil(n/r),s=0,a=function(e){e?"function"==typeof t&&(t(e),t=null):++s===o&&"function"==typeof t&&t()},c=1;c<=o;c++){var u=new i(this.maskBytes,this.frameHeader,this.config);u.opcode=1===c?e.opcode:0,u.fin=c===o;var h=c===o?n-r*(c-1):r,l=r*(c-1);u.binaryPayload=e.binaryPayload.slice(l,l+h),this.sendFrame(u,a)}},f.prototype.sendCloseFrame=function(e,t,r){if("number"!=typeof e&&(e=f.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,e,t),this.state===u||"peer_requested_close"===this.state){var n=new i(this.maskBytes,this.frameHeader,this.config);n.fin=!0,n.opcode=8,n.closeStatus=e,"string"==typeof t&&(n.binaryPayload=new Buffer(t,"utf8")),this.sendFrame(n,r),this.socket.end()}},f.prototype.sendFrame=function(e,t){this._debug("sendFrame"),e.mask=this.maskOutgoingPackets;var r=this.socket.write(e.toBuffer(),t);return this.outputBufferFull=!r,r},e.exports=f},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:i,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var s=t[n],i=s.obj[s.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],h=i[u];"object"==typeof h&&null!==h&&-1===r.indexOf(h)&&(t.push({obj:i,prop:u}),r.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],s=0;s<r.length;++s)void 0!==r[s]&&n.push(r[s]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<n.length;++i){var a=n.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=n.charAt(i):a<128?o+=s[a]:a<2048?o+=s[192|a>>6]+s[128|63&a]:a<55296||a>=57344?o+=s[224|a>>12]+s[128|a>>6&63]+s[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(i)),o+=s[240|a>>18]+s[128|a>>12&63]+s[128|a>>6&63]+s[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,s){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(s&&(s.plainObjects||s.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=i(t,s)),o(t)&&o(r)?(r.forEach(function(r,o){if(n.call(t,o)){var i=t[o];i&&"object"==typeof i&&r&&"object"==typeof r?t[o]=e(i,r,s):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var i=r[o];return n.call(t,o)?t[o]=e(t[o],i,s):t[o]=i,t},a)}}},function(e,t,r){"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(72):e.exports=r(70)},function(e,t,r){"use strict";var n=r(28);e.exports=function(e,t,r,o,s){var i=new Error(e);return n(i,t,r,o,s)}},function(e,t,r){"use strict";var n=r(0);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var i=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))}))}),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},function(e,t,r){var n=r(3),o=n.extend,s=r(2),i=r(1).EventEmitter,a=r(6),c=r(5),u=r(4),h=r(14),l=r(7),f=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)];function p(e){var t;(i.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},e)&&(e.tlsOptions?(t=e.tlsOptions,delete e.tlsOptions):t={},o(this.config,e),o(this.config.tlsOptions,t));switch(this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}s.inherits(p,i),p.prototype.connect=function(e,t,r,s,i){var h=this;if("string"==typeof t&&(t=t.length>0?[t]:[]),t instanceof Array||(t=[]),this.protocols=t,this.origin=r,this.url="string"==typeof e?u.parse(e):e,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure="wss:"===this.url.protocol,this.protocols.forEach(function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t),n=e.charAt(t);if(r<33||r>126||-1!==f.indexOf(n))throw new Error('Protocol list contains invalid character "'+String.fromCharCode(r)+'"')}});this.url.port||(this.url.port={"ws:":"80","wss:":"443"}[this.url.protocol]);for(var l=new Buffer(16),p=0;p<16;p++)l[p]=Math.round(255*Math.random());this.base64nonce=l.toString("base64");var d=this.url.hostname;("ws:"===this.url.protocol&&"80"!==this.url.port||"wss:"===this.url.protocol&&"443"!==this.url.port)&&(d+=":"+this.url.port);var m,g=s||{};function y(e){h._req=null,h.emit("connectFailed",e)}o(g,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:d}),this.protocols.length>0&&(g["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(13===this.config.webSocketVersion?g.Origin=this.origin:8===this.config.webSocketVersion&&(g["Sec-WebSocket-Origin"]=this.origin)),m=this.url.pathname?this.url.path:this.url.path?"/"+this.url.path:"/";var v={agent:!1};if(i&&o(v,i),o(v,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:m,headers:g}),this.secure)for(var b in h.config.tlsOptions)h.config.tlsOptions.hasOwnProperty(b)&&(v[b]=h.config.tlsOptions[b]);var w=this._req=(this.secure?c:a).request(v);w.on("upgrade",function(e,t,r){h._req=null,w.removeListener("error",y),h.socket=t,h.response=e,h.firstDataChunk=r,h.validateHandshake()}),w.on("error",y),w.on("response",function(e){if(h._req=null,n.eventEmitterListenerCount(h,"httpResponse")>0)h.emit("httpResponse",e,h),e.socket&&e.socket.end();else{var t=[];for(var r in e.headers)t.push(r+": "+e.headers[r]);h.failHandshake("Server responded with a non-101 status: "+e.statusCode+"\nResponse Headers Follow:\n"+t.join("\n")+"\n")}}),w.end()},p.prototype.validateHandshake=function(){var e=this.response.headers;if(this.protocols.length>0){if(this.protocol=e["sec-websocket-protocol"],!this.protocol)return void this.failHandshake("Expected a Sec-WebSocket-Protocol header.");if(-1===this.protocols.indexOf(this.protocol))return void this.failHandshake("Server did not respond with a requested protocol.")}if(e.connection&&"upgrade"===e.connection.toLocaleLowerCase())if(e.upgrade&&"websocket"===e.upgrade.toLocaleLowerCase()){var t=h.createHash("sha1");t.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var r=t.digest("base64");e["sec-websocket-accept"]?e["sec-websocket-accept"]===r?this.succeedHandshake():this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+r):this.failHandshake("Expected Sec-WebSocket-Accept header from server")}else this.failHandshake("Expected an Upgrade: websocket header from the server");else this.failHandshake("Expected a Connection: Upgrade header from the server")},p.prototype.failHandshake=function(e){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(e))},p.prototype.succeedHandshake=function(){var e=new l(this.socket,[],this.protocol,!0,this.config);e.webSocketVersion=this.config.webSocketVersion,e._addSocketEventListeners(),this.emit("connect",e),this.firstDataChunk.length>0&&e.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},p.prototype.abort=function(){this._req&&this._req.abort()},e.exports=p},function(e,t,r){var n=r(53).BufferUtil;const o=1;function s(e,t,r){this.maskBytes=e,this.frameHeader=t,this.config=r,this.maxReceivedFrameSize=r.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=o,this.closeStatus=-1}s.prototype.addData=function(e){if(this.parseState===o&&e.length>=2){e.joinInto(this.frameHeader,0,0,2),e.advance(2);var t=this.frameHeader[0],r=this.frameHeader[1];if(this.fin=Boolean(128&t),this.rsv1=Boolean(64&t),this.rsv2=Boolean(32&t),this.rsv3=Boolean(16&t),this.mask=Boolean(128&r),this.opcode=15&t,this.length=127&r,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}126===this.length?this.parseState=2:127===this.length?this.parseState=3:this.parseState=4}if(2===this.parseState)e.length>=2&&(e.joinInto(this.frameHeader,2,0,2),e.advance(2),this.length=this.frameHeader.readUInt16BE(2,!0),this.parseState=4);else if(3===this.parseState&&e.length>=8){e.joinInto(this.frameHeader,2,0,8),e.advance(8);var s=[this.frameHeader.readUInt32BE(2,!0),this.frameHeader.readUInt32BE(6,!0)];if(0!==s[0])return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=s[1],this.parseState=4}if(4===this.parseState&&(this.mask?e.length>=4&&(e.joinInto(this.maskBytes,0,0,4),e.advance(4),this.parseState=5):this.parseState=5),5===this.parseState){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(0===this.length)return this.binaryPayload=new Buffer(0),this.parseState=6,!0;if(e.length>=this.length)return this.binaryPayload=e.take(this.length),e.advance(this.length),this.mask&&n.unmask(this.binaryPayload,this.maskBytes),8===this.opcode&&(1===this.length&&(this.binaryPayload=new Buffer(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0,!0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=6,!0}return!1},s.prototype.throwAwayPayload=function(e){return e.length>=this.length&&(e.advance(this.length),this.parseState=6,!0)},s.prototype.toBuffer=function(e){var t,r,o,s=2,i=0,a=0;this.fin&&(i|=128),this.rsv1&&(i|=64),this.rsv2&&(i|=32),this.rsv3&&(i|=16),this.mask&&(a|=128),i|=15&this.opcode,8===this.opcode?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),(r=new Buffer(this.length)).writeUInt16BE(this.closeStatus,0,!0),this.length>2&&this.binaryPayload.copy(r,2)):this.binaryPayload?(r=this.binaryPayload,this.length=r.length):this.length=0,this.length<=125?a|=127&this.length:this.length>125&&this.length<=65535?(a|=126,s+=2):this.length>65535&&(a|=127,s+=8);var c=new Buffer(this.length+s+(this.mask?4:0));return c[0]=i,c[1]=a,o=2,this.length>125&&this.length<=65535?(c.writeUInt16BE(this.length,o,!0),o+=2):this.length>65535&&(c.writeUInt32BE(0,o,!0),c.writeUInt32BE(this.length,o+4,!0),o+=8),this.mask?(t=e?0:4294967295*Math.random()|0,this.maskBytes.writeUInt32BE(t,0,!0),this.maskBytes.copy(c,o),o+=4,r&&n.mask(r,this.maskBytes,c,o,this.length)):r&&r.copy(c,o),c},s.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+Boolean(this.binaryPayload)+", masked: "+this.mask},e.exports=s},function(e,t){e.exports=require("crypto")},function(e,t,r){for(var n=r(14),o=r(2),s=r(4),i=r(1).EventEmitter,a=r(7),c=/,\s*/,u=/;\s*/,h=/[\r\n]/g,l=/,\s*/,f=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],p=[String.fromCharCode(127)],d=0;d<31;d++)p.push(String.fromCharCode(d));var m=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,g=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,y=/^"[^"]*"$/,v=/[\x00-\x20\x3b]/g,b=/[;,] */,w={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function E(e,t,r){i.call(this),this.socket=e,this.httpRequest=t,this.resource=t.url,this.remoteAddress=e.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=r,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}function S(e){process.nextTick(function(){e.drop(1006,"TCP connection lost before handshake completed.",!0)})}o.inherits(E,i),E.prototype.readHandshake=function(){var e=this,t=this.httpRequest;if(this.resourceURL=s.parse(this.resource,!0),this.host=t.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=t.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(t.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var r=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw r.httpCode=426,r.headers={"Sec-WebSocket-Version":"13"},r}13===this.webSocketVersion?this.origin=t.headers.origin:8===this.webSocketVersion&&(this.origin=t.headers["sec-websocket-origin"]);var n=t.headers["sec-websocket-protocol"];(this.protocolFullCaseMap={},this.requestedProtocols=[],n)&&n.split(c).forEach(function(t){var r=t.toLocaleLowerCase();e.requestedProtocols.push(r),e.protocolFullCaseMap[r]=t});if(!this.serverConfig.ignoreXForwardedFor&&t.headers["x-forwarded-for"]){var o=this.remoteAddress;this.remoteAddresses=t.headers["x-forwarded-for"].split(l),this.remoteAddresses.push(o),this.remoteAddress=this.remoteAddresses[0]}var i=t.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(i);var a=t.headers.cookie;this.cookies=this.parseCookies(a)},E.prototype.parseExtensions=function(e){if(!e||0===e.length)return[];var t=e.toLocaleLowerCase().split(c);return t.forEach(function(e,t,r){var n=e.split(u),o=n[0],s=n.slice(1);s.forEach(function(e,t,r){var n=e.split("="),o={name:n[0],value:n[1]};r.splice(t,1,o)});var i={name:o,params:s};r.splice(t,1,i)}),t},E.prototype.parseCookies=function(e){if(!e||"string"!=typeof e)return[];var t=[];return e.split(b).forEach(function(e){var r=e.indexOf("=");if(-1!==r){var n=e.substr(0,r).trim(),o=e.substr(++r,e.length).trim();'"'===o[0]&&(o=o.slice(1,-1)),t.push({name:n,value:decodeURIComponent(o)})}else t.push({name:e,value:null})}),t},E.prototype.accept=function(e,t,r){var o;this._verifyResolution(),e?void 0===(o=this.protocolFullCaseMap[e.toLocaleLowerCase()])&&(o=e):o=e,this.protocolFullCaseMap=null;var s=n.createHash("sha1");s.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var i="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+s.digest("base64")+"\r\n";if(o){for(var c=0;c<o.length;c++){var u=o.charCodeAt(c),l=o.charAt(c);if(u<33||u>126||-1!==f.indexOf(l))throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(l)+'" in subprotocol.')}if(-1===this.requestedProtocols.indexOf(e))throw this.reject(500),new Error("Specified protocol was not requested by the client.");o=o.replace(h,""),i+="Sec-WebSocket-Protocol: "+o+"\r\n"}if(this.requestedProtocols=null,t&&(t=t.replace(h,""),13===this.webSocketVersion?i+="Origin: "+t+"\r\n":8===this.webSocketVersion&&(i+="Sec-WebSocket-Origin: "+t+"\r\n")),r){if(!Array.isArray(r))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var p={};r.forEach(function(e){if(!e.name||!e.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(e.name=e.name.replace(v,""),e.value=e.value.replace(v,""),p[e.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");p[e.name]=!0;var t=e.name.match(m);if(t)throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie name");if(t=e.value.match(y)?e.value.slice(1,-1).match(g):e.value.match(g))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie value");var r=[e.name+"="+e.value];if(e.path){if(t=e.path.match(v))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie path");r.push("Path="+e.path)}if(e.domain){if("string"!=typeof e.domain)throw this.reject(500),new Error("Domain must be specified and must be a string.");if(t=e.domain.match(v))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie domain");r.push("Domain="+e.domain.toLowerCase())}if(e.expires){if(!(e.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');r.push("Expires="+e.expires.toGMTString())}if(e.maxage){var n=e.maxage;if("string"==typeof n&&(n=parseInt(n,10)),isNaN(n)||n<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');n=Math.round(n),r.push("Max-Age="+n.toString(10))}if(e.secure){if("boolean"!=typeof e.secure)throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');r.push("Secure")}if(e.httponly){if("boolean"!=typeof e.httponly)throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');r.push("HttpOnly")}i+="Set-Cookie: "+r.join(";")+"\r\n"}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),i+="\r\n";var d=new a(this.socket,[],e,!1,this.serverConfig);d.webSocketVersion=this.webSocketVersion,d.remoteAddress=this.remoteAddress,d.remoteAddresses=this.remoteAddresses;var b=this;return this._socketIsClosing?S(d):this.socket.write(i,"ascii",function(e){e?S(d):(b._removeSocketCloseListeners(),d._addSocketEventListeners())}),this.emit("requestAccepted",d),d},E.prototype.reject=function(e,t,r){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),"number"!=typeof e&&(e=403);var n="HTTP/1.1 "+e+" "+w[e]+"\r\nConnection: close\r\n";if(t&&(n+="X-WebSocket-Reject-Reason: "+(t=t.replace(h,""))+"\r\n"),r)for(var o in r){var s=r[o].toString().replace(h,"");n+=o.replace(h,"")+": "+s+"\r\n"}n+="\r\n",this.socket.end(n,"ascii"),this.emit("requestRejected",this)},E.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},E.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},E.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")},e.exports=E},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){var e=this;this.resolve=function(){},this.reject=function(){},this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})}}();t.Deferred=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(59),s=r(1);!function(e){e.ORGANIZATION="organizationId",e.USER="userId",e.WORKSPACE="workspaceId"}(n||(n={}));var i=function(){function e(e,t,r){var n=this;this.webSocketStatusChangeEventName="websocketChanged",this.maxReconnectionAttempts=30,this.reconnectionAttemptNumber=0,this.reconnectionDelay=3e4,this.reconnectionInitialDelay=1e3,this.websocketContext="/api/websocket",e.addListener("open",function(){return n.onConnectionOpen()}),e.addListener("close",function(){return n.onConnectionClose()}),this.clientId="",this.jsonRpcApiClient=new o.JsonRpcApiClient(e),this.wsMasterEventEmitter=new s.EventEmitter,this.failingWebsockets=new Set,this.entryPoint=t,this.refreshToken=r}return e.prototype.onDidWebSocketStatusChange=function(e){this.wsMasterEventEmitter.on(this.webSocketStatusChangeEventName,e)},e.prototype.connect=function(){var e=this;return this.refreshToken?this.refreshToken().then(function(t){var r=["token="+t];e.clientId&&r.push("clientId="+e.clientId);var n=e.entryPoint+e.websocketContext,o=r.join("&");return n=!1===/\?/.test(n)?n+"?"+o:n+"&"+o,e.jsonRpcApiClient.connect(n).then(function(){return e.fetchClientId()})}):Promise.resolve(void 0)},e.prototype.subscribeEnvironmentOutput=function(e,t){this.subscribe("runtime/log",n.WORKSPACE,e,t)},e.prototype.unSubscribeEnvironmentOutput=function(e,t){this.unsubscribe("runtime/log",n.WORKSPACE,e,t)},e.prototype.subscribeWorkspaceStatus=function(e,t){this.subscribe("workspace/statusChanged",n.WORKSPACE,e,function(r){e===r.workspaceId&&t(r)})},e.prototype.unSubscribeWorkspaceStatus=function(e,t){this.unsubscribe("workspace/statusChanged",n.WORKSPACE,e,t)},e.prototype.subscribeOrganizationStatus=function(e,t){this.subscribe("organization/statusChanged",n.ORGANIZATION,e,t)},e.prototype.unSubscribeOrganizationStatus=function(e,t){this.unsubscribe("organization/statusChanged",n.ORGANIZATION,e,t)},e.prototype.subscribeOrganizationMembershipStatus=function(e,t){this.subscribe("organization/membershipChanged",n.USER,e,t)},e.prototype.unSubscribeOrganizationMembershipStatus=function(e,t){this.unsubscribe("organization/membershipChanged",n.USER,e,t)},e.prototype.fetchClientId=function(){var e=this;return this.jsonRpcApiClient.request("websocketIdService/getId").then(function(t){e.clientId=t[0]})},e.prototype.getClientId=function(){return this.clientId},e.prototype.onConnectionOpen=function(){0!==this.reconnectionAttemptNumber&&(this.failingWebsockets.delete(this.entryPoint),this.wsMasterEventEmitter.emit(this.webSocketStatusChangeEventName,this.failingWebsockets),console.warn("WebSocket connection is opened.")),this.reconnectionAttemptNumber=0},e.prototype.onConnectionClose=function(){var e,t=this;if(console.warn("WebSocket connection is closed."),5===this.reconnectionAttemptNumber)this.failingWebsockets.add(this.entryPoint),this.wsMasterEventEmitter.emit(this.webSocketStatusChangeEventName,this.failingWebsockets);else if(this.reconnectionAttemptNumber===this.maxReconnectionAttempts)return void console.warn("The maximum number of attempts to reconnect WebSocket has been reached.");this.reconnectionAttemptNumber++,(e=1===this.reconnectionAttemptNumber?0:this.reconnectionAttemptNumber<=10?this.reconnectionInitialDelay:this.reconnectionDelay)&&console.warn("WebSocket will be reconnected in "+e+" ms..."),setTimeout(function(){console.warn("WebSocket is reconnecting, attempt #"+t.reconnectionAttemptNumber+" out of "+t.maxReconnectionAttempts+"..."),t.connect()},e)},e.prototype.subscribe=function(e,t,r,n){var o=e,s=t,i={method:o,scope:{}};i.scope[s]=r,this.jsonRpcApiClient.subscribe("subscribe",o,n,i)},e.prototype.unsubscribe=function(e,t,r,n){var o=e,s=t,i={method:o,scope:{}};i.scope[s]=r,this.jsonRpcApiClient.unsubscribe("unSubscribe",o,n,i)},e}();t.WorkspaceMasterApi=i},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,s=r(8),i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=s.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},i)},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.getAll=0]="getAll",e[e.getAllByNamespace=1]="getAllByNamespace",e[e.fetchById=2]="fetchById",e[e.create=3]="create",e[e.update=4]="update",e[e.delete=5]="delete",e[e.start=6]="start",e[e.startTemporary=7]="startTemporary",e[e.stop=8]="stop",e[e.getSettings=9]="getSettings"}(n=t.METHOD||(t.METHOD={}));var o=function(){return function(e){if(e.code&&(this.status=Number(e.code)),this.name=e.name,this.config=e.config,e.request&&(this.request=e.request),e.response&&(this.response=e.response),-1!==this.status&&this.status||this.response&&(!this.response||this.response.status))if(this.response&&this.response.data&&this.response.data.message)this.message=this.response.data.message;else{var t=this.status;!this.status&&this.response&&this.response.status?t=this.response.status:!this.status&&this.request&&this.request.status&&(t=this.request.status),this.message='"'+t+'" returned by "'+this.config.url+'"."'}else this.message='network issues occured while requesting "'+this.config.url+'".'}}();t.RequestError=o;var s=function(){function e(e){this.promises=new Map,this.remoteAPI=e}return e.prototype.getAll=function(){var e=this,t=this.buildKey(n.getAll),r=this.getRequestPromise(t);if(r)return r;var s=new Promise(function(t,r){e.remoteAPI.getAll().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})});return this.saveRequestPromise(t,s),s},e.prototype.getAllByNamespace=function(e){var t=this,r=this.buildKey(n.getAllByNamespace,e),s=this.getRequestPromise(r);if(s)return s;var i=new Promise(function(r,n){t.remoteAPI.getAllByNamespace(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})});return this.saveRequestPromise(r,i),i},e.prototype.getById=function(e){var t=this,r=this.buildKey(n.getAllByNamespace,e),s=this.getRequestPromise(r);if(s)return s;var i=new Promise(function(r,n){t.remoteAPI.getById(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})});return this.saveRequestPromise(r,i),i},e.prototype.create=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.create(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.update=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.update(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.delete=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.delete(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.start=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.start(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.stop=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.stop(e).then(function(e){r()}).catch(function(e){n(new o(e))})})},e.prototype.getSettings=function(){var e=this,t=this.buildKey(n.getSettings),r=this.getRequestPromise(t);if(r)return r;var s=new Promise(function(t,r){e.remoteAPI.getSettings().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})});return this.saveRequestPromise(t,s),s},e.prototype.getFactoryResolver=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.getFactoryResolver(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.generateSshKey=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.generateSshKey(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.createSshKey=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.createSshKey(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.getSshKey=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.getSshKey(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.getAllSshKey=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.getAllSshKey(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.deleteSshKey=function(e,t){var r=this;return new Promise(function(n,s){r.remoteAPI.deleteSshKey(e,t).then(function(e){n(e.data)}).catch(function(e){s(new o(e))})})},e.prototype.getCurrentUser=function(){var e=this;return new Promise(function(t,r){e.remoteAPI.getCurrentUser().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})})},e.prototype.getCurrentUserProfile=function(){var e=this;return new Promise(function(t,r){e.remoteAPI.getCurrentUserProfile().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})})},e.prototype.getUserPreferences=function(e){var t=this;return void 0===e&&(e=void 0),new Promise(function(r,n){t.remoteAPI.getUserPreferences(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.updateUserPreferences=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.updateUserPreferences(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.replaceUserPreferences=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.replaceUserPreferences(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.deleteUserPreferences=function(e){var t=this;return void 0===e&&(e=void 0),new Promise(function(r,n){t.remoteAPI.deleteUserPreferences(e).then(function(e){r()}).catch(function(e){n(new o(e))})})},e.prototype.getOAuthToken=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.getOAuthToken(e).then(function(e){r(e.data.token)}).catch(function(e){n(new o(e))})})},e.prototype.getOAuthProviders=function(){var e=this;return new Promise(function(t,r){e.remoteAPI.getOAuthProviders().then(function(e){t(e.data.map(function(e){return e.name}))}).catch(function(e){r(new o(e))})})},e.prototype.getKubernetesNamespace=function(){var e=this;return new Promise(function(t,r){e.remoteAPI.getKubernetesNamespace().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})})},e.prototype.getDevfileSchema=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.getDevfileSchema(e).then(function(e){r(e.data)}).catch(function(e){n(new o(e))})})},e.prototype.getApiInfo=function(){var e=this;return new Promise(function(t,r){e.remoteAPI.getApiInfo().then(function(e){t(e.data)}).catch(function(e){r(new o(e))})})},e.prototype.updateActivity=function(e){var t=this;return new Promise(function(r,n){t.remoteAPI.updateActivity(e).then(function(e){return r()}).catch(function(e){n(new o(e))})})},e.prototype.buildKey=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.unshift(e.toString()),t.join("-")},e.prototype.getRequestPromise=function(e){return this.promises.get(e)},e.prototype.saveRequestPromise=function(e,t){var r=this;this.promises.set(e,t),t.then(function(){return r.promises.delete(e)},function(){return r.promises.delete(e)})},e}();t.RemoteAPI=s},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){t=t||{};var r={},o=["url","method","data"],s=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function u(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(e[o],t[o])}n.forEach(o,function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))}),n.forEach(s,u),n.forEach(i,function(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(void 0,t[o])}),n.forEach(a,function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))});var h=o.concat(s).concat(i).concat(a),l=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===h.indexOf(e)});return n.forEach(l,u),r}},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("fs")},function(e,t,r){var n;function o(e){function r(){if(r.enabled){var e=r,o=+new Date,s=o-(n||o);e.diff=s,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var s=i[c];r=o.call(e,s),i.splice(c,1),c--}return r}),t.formatArgs.call(e,i),(r.log||t.log||console.log.bind(console)).apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(71),t.names=[],t.skips=[],t.formatters={}},function(e,t){e.exports=require("assert")},function(e,t,r){var n=r(4),o=n.URL,s=r(6),i=r(5),a=r(74).Writable,c=r(25),u=r(73),h=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(e){h[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var l=S("ERR_FR_REDIRECTION_FAILURE",""),f=S("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),p=S("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),d=S("ERR_STREAM_WRITE_AFTER_END","write after end");function m(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function g(e,t){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.emit("timeout")},t)}function y(){clearTimeout(this._timeout)}function v(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(s){var i=s+":",a=r[i]=e[s],h=t[s]=Object.create(a);h.request=function(e,s,a){if("string"==typeof e){var h=e;try{e=w(new o(h))}catch(t){e=n.parse(h)}}else o&&e instanceof o?e=w(e):(a=s,s=e,e={protocol:i});return"function"==typeof s&&(a=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=r,c.equal(s.protocol,i,"protocol mismatch"),u("options",s),new m(s,a)},h.get=function(e,t,r){var n=h.request(e,t,r);return n.end(),n}}),t}function b(){}function w(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function E(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r}function S(e,t){function r(e){Error.captureStackTrace(this,this.constructor),this.message=e||t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}m.prototype=Object.create(a.prototype),m.prototype.write=function(e,t,r){if(this._ending)throw new d;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new p),this.abort()):r&&r()},m.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},m.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},m.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},m.prototype.setTimeout=function(e,t){if(t&&this.once("timeout",t),this.socket)g(this,e);else{var r=this;this._currentRequest.once("socket",function(){g(r,e)})}return this.once("response",y),this.once("error",y),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){m.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(m.prototype,e,{get:function(){return this._currentRequest[e]}})}),m.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},m.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var o=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s in this._currentUrl=n.format(this._options),o._redirectable=this,h)s&&o.on(s,h[s]);if(this._isRedirect){var i=0,a=this,c=this._requestBodyBuffers;!function e(t){if(o===a._currentRequest)if(t)a.emit("error",t);else if(i<c.length){var r=c[i++];o.finished||o.write(r.data,r.encoding,e)}else a._ended&&o.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},m.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&!1!==this._options.followRedirects&&t>=300&&t<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",b),this._currentRequest.abort(),e.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new f);((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],E(/^content-/i,this._options.headers));var o=E(/^host$/i,this._options.headers)||n.parse(this._currentUrl).hostname,s=n.resolve(this._currentUrl,r);u("redirecting to",s),this._isRedirect=!0;var i=n.parse(s);if(Object.assign(this._options,i),i.hostname!==o&&E(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var a={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,a)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){var c=new l("Redirected request failed: "+e.message);c.cause=e,this.emit("error",c)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},e.exports=v({http:s,https:i}),e.exports.wrap=v},function(e,t,r){"use strict";var n=r(79),o=r(78);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(10);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";var n=r(0),o=r(82),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(81):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=r(75)),e}(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(s)}),e.exports=a},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";r(22);var n,o=r(33),s=r(6),i=r(5),a=r(1),c=(r(25),r(2));function u(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||s.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(e,r,n,o){for(var s=l(r,n,o),i=0,a=t.requests.length;i<a;++i){var c=t.requests[i];if(c.host===s.host&&c.port===s.port)return t.requests.splice(i,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function h(e,t){var r=this;u.prototype.createSocket.call(r,e,function(n){var s=e.request.getHeader("host"),i=f({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):e.host}),a=o.connect(0,i);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function l(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function f(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];void 0!==n[a]&&(e[a]=n[a])}}return e}t.httpOverHttp=function(e){var t=new u(e);return t.request=s.request,t},t.httpsOverHttp=function(e){var t=new u(e);return t.request=s.request,t.createSocket=h,t.defaultPort=443,t},t.httpOverHttps=function(e){var t=new u(e);return t.request=i.request,t},t.httpsOverHttps=function(e){var t=new u(e);return t.request=i.request,t.createSocket=h,t.defaultPort=443,t},c.inherits(u,a.EventEmitter),u.prototype.addRequest=function(e,t,r,n){var o=this,s=f({request:e},o.options,l(t,r,n));o.sockets.length>=this.maxSockets?o.requests.push(s):o.createSocket(s,function(t){function r(){o.emit("free",t,s)}function n(e){o.removeSocket(t),t.removeListener("free",r),t.removeListener("close",n),t.removeListener("agentRemove",n)}t.on("free",r),t.on("close",n),t.on("agentRemove",n),e.onSocket(t)})},u.prototype.createSocket=function(e,t){var r=this,o={};r.sockets.push(o);var s=f({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(s.localAddress=e.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),n("making CONNECT request");var i=r.request(s);function a(s,a,c){var u;return i.removeAllListeners(),a.removeAllListeners(),200!==s.statusCode?(n("tunneling socket could not be established, statusCode=%d",s.statusCode),a.destroy(),(u=new Error("tunneling socket could not be established, statusCode="+s.statusCode)).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(o)):c.length>0?(n("got illegal response body from proxy"),a.destroy(),(u=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(o)):(n("tunneling connection has established"),r.sockets[r.sockets.indexOf(o)]=a,t(a))}i.useChunkedEncodingByDefault=!1,i.once("response",function(e){e.upgrade=!0}),i.once("upgrade",function(e,t,r){process.nextTick(function(){a(e,t,r)})}),i.once("connect",a),i.once("error",function(t){i.removeAllListeners(),n("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var s=new Error("tunneling socket could not be established, cause="+t.message);s.code="ECONNRESET",e.request.emit("error",s),r.removeSocket(o)}),i.end()},u.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,function(e){r.request.onSocket(e)})}},n=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=n},function(e,t,r){e.exports=r(34)},function(e,t){e.exports=require("path")},function(e){e.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <brian@worlize.com> (https://www.worlize.com/)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.23",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.8.0"},dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.4"},devDependencies:{"buffer-equal":"^0.0.1",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.11.2","jshint-stylish":"^1.0.2",tape:"^4.0.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},function(e,t,r){e.exports=r(37).version},function(e,t){var r={disableWarnings:!1,deprecationWarningMap:{},warn:function(e){!this.disableWarnings&&this.deprecationWarningMap[e]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[e]),this.deprecationWarningMap[e]=!1)}};e.exports=r},function(e,t){e.exports=function(e){this.type=e,this.isTrusted=!1}},function(e,t){function r(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=n,this.removeEventListener=o,this.dispatchEvent=s)}function n(e,t){var r,n,o;if(e&&t){for(void 0===(r=this._listeners[e])&&(this._listeners[e]=r=[]),n=0;o=r[n];n++)if(o===t)return;r.push(t)}}function o(e,t){var r,n,o;if(e&&t&&void 0!==(r=this._listeners[e])){for(n=0;o=r[n];n++)if(o===t){r.splice(n,1);break}0===r.length&&delete this._listeners[e]}}function s(e){var t,r,n,o,s,i=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");if(e._dispatched)throw new Error("event already dispatched");for(e._dispatched=!0,e.cancelable=!0,e.target=this,e.stopImmediatePropagation=function(){i=!0},t=e.type,r=this._listeners[t]||[],"function"==typeof(n=this["on"+t])&&r.push(n),o=0;(s=r[o])&&!i;o++)s.call(this,e);return!e.defaultPrevented}e.exports=r,Object.defineProperties(r.prototype,{listeners:{get:function(){return this._listeners}}})},function(e,t,r){e.exports={EventTarget:r(41),Event:r(40)}},function(e,t){e.exports=o,o.strict=s,o.loose=i;var r=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function o(e){return s(e)||i(e)}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return n[r.call(e)]}},function(e,t,r){var n=r(43).strict;e.exports=function(e){if(n(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},function(e,t,r){var n=r(12),o=r(44),s=r(42);const i=0,a=1,c=2,u=3;function h(e,t,r,o,c,h){s.EventTarget.call(this),(h=h||{}).assembleFragments=!0;var m=this;this._url=e,this._readyState=i,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new n(h),this._client.on("connect",function(e){(function(e){var t=this;this._readyState=a,this._connection=e,this._protocol=e.protocol,this._extensions=e.extensions,this._connection.on("close",function(e,r){(function(e,t){d.call(this),this._readyState=u,this.dispatchEvent(l(e,t||""))}).call(t,e,r)}),this._connection.on("message",function(e){(function(e){if(e.utf8Data)this.dispatchEvent(f(e.utf8Data));else if(e.binaryData&&"arraybuffer"===this.binaryType){for(var t=e.binaryData,r=new ArrayBuffer(t.length),n=new Uint8Array(r),o=0,s=t.length;o<s;++o)n[o]=t[o];this.dispatchEvent(f(r))}}).call(t,e)}),this.dispatchEvent(new s.Event("open"))}).call(m,e)}),this._client.on("connectFailed",function(){p.call(m)}),this._client.connect(e,t,r,o,c)}function l(e,t){var r=new s.Event("close");return r.code=e,r.reason=t,r.wasClean=void 0===e||1e3===e,r}function f(e){var t=new s.Event("message");return t.data=e,t}function p(){d.call(this),this._readyState=u;try{this.dispatchEvent(new s.Event("error"))}finally{this.dispatchEvent(l(1006,"connection failed"))}}function d(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}e.exports=h,Object.defineProperties(h.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(h.prototype,{binaryType:{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e)throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=e}}}),[["CONNECTING",i],["OPEN",a],["CLOSING",c],["CLOSED",u]].forEach(function(e){Object.defineProperty(h.prototype,e[0],{get:function(){return e[1]}})}),[["CONNECTING",i],["OPEN",a],["CLOSING",c],["CLOSED",u]].forEach(function(e){Object.defineProperty(h,e[0],{get:function(){return e[1]}})}),h.prototype.send=function(e){if(this._readyState!==a)throw new Error("cannot call send() while not connected");if("string"==typeof e||e instanceof String)this._connection.sendUTF(e);else if(e instanceof Buffer)this._connection.sendBytes(e);else{if(!e.byteLength&&0!==e.byteLength)throw new Error("unknown binary data:",e);e=o(e),this._connection.sendBytes(e)}},h.prototype.close=function(e,t){switch(this._readyState){case i:p.call(this),this._client.on("connect",function(r){e?r.close(e,t):r.close()});break;case a:this._readyState=c,e?this._connection.close(e,t):this._connection.close()}}},function(e,t,r){var n=r(2),o=r(1).EventEmitter;function s(e,t){o.call(this),this.webSocketRequest=e,this.protocol="____no_protocol____"===t?null:t,this.origin=e.origin,this.resource=e.resource,this.resourceURL=e.resourceURL,this.httpRequest=e.httpRequest,this.remoteAddress=e.remoteAddress,this.webSocketVersion=e.webSocketVersion,this.requestedExtensions=e.requestedExtensions,this.cookies=e.cookies}n.inherits(s,o),s.prototype.accept=function(e,t){var r=this.webSocketRequest.accept(this.protocol,e,t);return this.emit("requestAccepted",r),r},s.prototype.reject=function(e,t,r){this.webSocketRequest.reject(e,t,r),this.emit("requestRejected",this)},e.exports=s},function(e,t,r){var n=r(3).extend,o=r(2),s=r(1).EventEmitter,i=r(46);function a(e){s.call(this),this.config={server:null},e&&n(this.config,e),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}o.inherits(a,s),a.prototype.attachServer=function(e){if(!e)throw new Error("You must specify a WebSocketServer instance to attach to.");this.server=e,this.server.on("request",this._requestHandler)},a.prototype.detachServer=function(){if(!this.server)throw new Error("Cannot detach from server: not attached.");this.server.removeListener("request",this._requestHandler),this.server=null},a.prototype.mount=function(e,t,r){if(!e)throw new Error("You must specify a path for this handler.");if(t||(t="____no_protocol____"),!r)throw new Error("You must specify a callback for this handler.");if(!((e=this.pathToRegExp(e))instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var n=e.toString();if(t=t.toLocaleLowerCase(),-1!==this.findHandlerIndex(n,t))throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:e,pathString:n,protocol:t,callback:r})},a.prototype.unmount=function(e,t){var r=this.findHandlerIndex(this.pathToRegExp(e).toString(),t);if(-1===r)throw new Error("Unable to find a route matching the specified path and protocol.");this.handlers.splice(r,1)},a.prototype.findHandlerIndex=function(e,t){t=t.toLocaleLowerCase();for(var r=0,n=this.handlers.length;r<n;r++){var o=this.handlers[r];if(o.pathString===e&&o.protocol===t)return r}return-1},a.prototype.pathToRegExp=function(e){return"string"==typeof e&&("*"===e?e=/^.*$/:(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp("^"+e+"$"))),e},a.prototype.handleRequest=function(e){var t=e.requestedProtocols;0===t.length&&(t=["____no_protocol____"]);for(var r=0;r<t.length;r++)for(var n=t[r].toLocaleLowerCase(),o=0,s=this.handlers.length;o<s;o++){var a=this.handlers[o];if(a.path.test(e.resourceURL.pathname)&&(n===a.protocol||"*"===a.protocol)){var c=new i(e,n);return void a.callback(c)}}e.reject(404,"No handler is available for the given request.")},e.exports=a},function(e,t){
/*!
 * UTF-8 Validation Fallback Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.Validation={isValidUTF8:function(){return!0}}},function(e,t,r){
/*!
 * UTF-8 Validation Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=r(!function(){var e=new Error('Cannot find module "../build/Release/validation"');throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=r(!function(){var e=new Error('Cannot find module "../build/default/validation"');throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=r(48)}catch(e){throw console.error("validation.node seems not to have been built. Run npm install."),e}}}},function(e,t){e.exports=require("buffer")},function(e,t,r){var n=r(50).Buffer,o=r(1).EventEmitter;function s(e){if(!(this instanceof s))return new s(e);o.call(this);var t=this;void 0===e&&(e={}),t.encoding=e.encoding,t.construct=e.construct||n;var r={next:null,buffer:null},i={next:null,buffer:null},a=0;t.__defineGetter__("length",function(){return a});var c=0;t.write=function(e){return r.buffer?(i.next={next:null,buffer:e},i=i.next):(r.buffer=e,i=r),a+=e.length,t.emit("write",e),!0},t.end=function(e){n.isBuffer(e)&&t.write(e)},t.push=function(){return[].concat.apply([],arguments).forEach(t.write),t},t.forEach=function(e){if(!r.buffer)return new t.construct(0);if(r.buffer.length-c<=0)return t;for(var n={buffer:r.buffer.slice(c),next:r.next};n&&n.buffer;){if(e(n.buffer))break;n=n.next}return t},t.join=function(e,n){if(!r.buffer)return new t.construct(0);void 0==e&&(e=0),void 0==n&&(n=t.length);var o=new t.construct(n-e),s=0;return t.forEach(function(t){if(e<s+t.length&&s<n&&t.copy(o,Math.max(0,s-e),Math.max(0,e-s),Math.min(t.length,n-s)),(s+=t.length)>n)return!0}),o},t.joinInto=function(e,n,o,s){if(!r.buffer)return new t.construct(0);void 0==o&&(o=0),void 0==s&&(s=t.length);var i=e;if(i.length-n<s-o)throw new Error("Insufficient space available in target Buffer.");var a=0;return t.forEach(function(e){if(o<a+e.length&&a<s&&e.copy(i,Math.max(n,n+a-o),Math.max(0,o-a),Math.min(e.length,s-a)),(a+=e.length)>s)return!0}),i},t.advance=function(e){for(c+=e,a-=e;r.buffer&&c>=r.buffer.length;)c-=r.buffer.length,r=r.next?r.next:{buffer:null,next:null};return null===r.buffer&&(i={next:null,buffer:null}),t.emit("advance",e),t},t.take=function(e,r){void 0==e?e=t.length:"number"!=typeof e&&(r=e,e=t.length);if(r||(r=t.encoding),r){var n="";return t.forEach(function(t){if(e<=0)return!0;n+=t.toString(r,0,Math.min(e,t.length)),e-=t.length}),n}return t.join(0,e)},t.toString=function(){return t.take("binary")}}e.exports=s,e.exports.BufferList=s,r(2).inherits(s,o)},function(e,t){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.BufferUtil={merge:function(e,t){for(var r=0,n=0,o=t.length;n<o;++n){var s=t[n];s.copy(e,r),r+=s.length}},mask:function(e,t,r,n,o){for(var s=t.readUInt32LE(0,!0),i=0;i<o-3;i+=4){var a=s^e.readUInt32LE(i,!0);a<0&&(a=4294967296+a),r.writeUInt32LE(a,n+i,!0)}switch(o%4){case 3:r[n+i+2]=e[i+2]^t[2];case 2:r[n+i+1]=e[i+1]^t[1];case 1:r[n+i]=e[i]^t[0]}},unmask:function(e,t){for(var r=t.readUInt32LE(0,!0),n=e.length,o=0;o<n-3;o+=4){var s=r^e.readUInt32LE(o,!0);s<0&&(s=4294967296+s),e.writeUInt32LE(s,o,!0)}switch(n%4){case 3:e[o+2]=e[o+2]^t[2];case 2:e[o+1]=e[o+1]^t[1];case 1:e[o]=e[o]^t[0]}}}},function(e,t,r){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=r(!function(){var e=new Error('Cannot find module "../build/Release/bufferutil"');throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=r(!function(){var e=new Error('Cannot find module "../build/default/bufferutil"');throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=r(52)}catch(e){throw console.error("bufferutil.node seems to not have been built. Run npm install."),e}}}},function(e,t,r){var n=r(3).extend,o=r(3),s=r(2),i=r(9)("websocket:server"),a=r(1).EventEmitter,c=r(15),u=function(e){a.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};s.inherits(u,a),u.prototype.mount=function(e){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,disableNagleAlgorithm:!0,closeTimeout:5e3},n(this.config,e),!this.config.httpServer)throw new Error("You must specify an httpServer on which to mount the WebSocket server.");Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var t=this._handlers.upgrade;this.config.httpServer.forEach(function(e){e.on("upgrade",t)})},u.prototype.unmount=function(){var e=this._handlers.upgrade;this.config.httpServer.forEach(function(t){t.removeListener("upgrade",e)})},u.prototype.closeAllConnections=function(){this.connections.forEach(function(e){e.close()}),this.pendingRequests.forEach(function(e){process.nextTick(function(){e.reject(503)})})},u.prototype.broadcast=function(e){Buffer.isBuffer(e)?this.broadcastBytes(e):"function"==typeof e.toString&&this.broadcastUTF(e)},u.prototype.broadcastUTF=function(e){this.connections.forEach(function(t){t.sendUTF(e)})},u.prototype.broadcastBytes=function(e){this.connections.forEach(function(t){t.sendBytes(e)})},u.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},u.prototype.handleUpgrade=function(e,t){var r=new c(t,e,this.config);try{r.readHandshake()}catch(e){return r.reject(e.httpCode?e.httpCode:400,e.message,e.headers),void i("Invalid handshake: %s",e.message)}this.pendingRequests.push(r),r.once("requestAccepted",this._handlers.requestAccepted),r.once("requestResolved",this._handlers.requestResolved),!this.config.autoAcceptConnections&&o.eventEmitterListenerCount(this,"request")>0?this.emit("request",r):this.config.autoAcceptConnections?r.accept(r.requestedProtocols[0],r.origin):r.reject(404,"No handler is configured to accept the connection.")},u.prototype.handleRequestAccepted=function(e){var t=this;e.once("close",function(r,n){t.handleConnectionClose(e,r,n)}),this.connections.push(e),this.emit("connect",e)},u.prototype.handleConnectionClose=function(e,t,r){var n=this.connections.indexOf(e);-1!==n&&this.connections.splice(n,1),this.emit("close",e,t,r)},u.prototype.handleRequestResolved=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&this.pendingRequests.splice(t,1)},e.exports=u},function(e,t,r){e.exports={server:r(54),client:r(12),router:r(47),frame:r(13),request:r(15),connection:r(7),w3cwebsocket:r(45),deprecation:r(39),version:r(38)}},function(e,t,r){e.exports=r(55)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=r(56),s=function(){function e(){this.handlers={}}return e.prototype.connect=function(e){var t=this,r=new n.Deferred,s=o.w3cwebsocket;return this.websocketStream=new s(e),this.websocketStream.onerror=function(){r.reject();t.handlers.error&&0!==t.handlers.error.length&&t.handlers.error.forEach(function(e){return e()})},this.websocketStream.onopen=function(){r.resolve();t.handlers.open&&0!==t.handlers.open.length&&t.handlers.open.forEach(function(e){return e()})},this.websocketStream.onclose=function(){t.handlers.close&&0!==t.handlers.close.length&&t.handlers.close.forEach(function(e){return e()})},this.websocketStream.onmessage=function(e){var r=JSON.parse(e.data);t.handlers.response&&0!==t.handlers.response.length&&t.handlers.response.forEach(function(e){return e(r)})},r.promise},e.prototype.disconnect=function(){this.websocketStream&&this.websocketStream.close()},e.prototype.send=function(e){this.websocketStream.send(JSON.stringify(e))},e.prototype.addListener=function(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},e.prototype.removeListener=function(e,t){if(this.handlers[e]&&t){var r=this.handlers[e].indexOf(t);-1!==r&&this.handlers[e].splice(r,1)}},e}();t.WebSocketClient=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(){function e(e){var t=this;this.counter=100,this.client=e,this.pendingRequests=new Map,this.notificationHandlers=new Map,this.client.addListener("response",function(e){t.processResponse(e)})}return e.prototype.request=function(e,t){var r=new n.Deferred,o=(this.counter++).toString();this.pendingRequests.set(o,r);var s={jsonrpc:"2.0",id:o,method:e,params:t};return this.client.send(s),r.promise},e.prototype.notify=function(e,t){var r={jsonrpc:"2.0",method:e,params:t};this.client.send(r)},e.prototype.addNotificationHandler=function(e,t){var r=this.notificationHandlers.get(e);r?r.push(t):(r=[t],this.notificationHandlers.set(e,r))},e.prototype.removeNotificationHandler=function(e,t){var r=this.notificationHandlers.get(e);r&&t&&r.splice(r.indexOf(t),1)},e.prototype.processResponse=function(e){this.isResponse(e)?this.processResponseMessage(e):this.processNotification(e)},e.prototype.processNotification=function(e){var t=e.method,r=this.notificationHandlers.get(t);r&&r.length>0&&r.forEach(function(t){t(e.params)})},e.prototype.processResponseMessage=function(e){var t=this.pendingRequests.get(e.id);t&&(e.result?t.resolve(e.result):e.error&&t.reject(e.error))},e.prototype.isResponse=function(e){return void 0!==e.id&&this.pendingRequests.has(e.id)},e}();t.JsonRpcClient=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(58),o=function(){function e(e){this.client=e,this.jsonRpcClient=new n.JsonRpcClient(e)}return e.prototype.subscribe=function(e,t,r,n){this.jsonRpcClient.addNotificationHandler(t,r),this.jsonRpcClient.notify(e,n)},e.prototype.unsubscribe=function(e,t,r,n){this.jsonRpcClient.removeNotificationHandler(t,r),this.jsonRpcClient.notify(e,n)},e.prototype.connect=function(e){return this.client.connect(e)},e.prototype.request=function(e,t){return this.jsonRpcClient.request(e,t)},e}();t.JsonRpcApiClient=o},function(e,t,r){"use strict";var n=r(8),o=Object.prototype.hasOwnProperty,s=Array.isArray,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=a?s.slice(0,a.index):s,h=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;h.push(u)}for(var l=0;r.depth>0&&null!==(a=i.exec(s))&&l<r.depth;){if(l+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(a[1])}return a&&h.push("["+s.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),s=e.length-1;s>=0;--s){var i,a=e[s];if("[]"===a&&r.parseArrays)i=[].concat(o);else{i=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,h=parseInt(u,10);r.parseArrays||""!==u?!isNaN(h)&&a!==u&&String(h)===u&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(i=[])[h]=o:i[u]=o:i={0:o}}o=i}return o}(h,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return i;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset;return{allowDots:void 0===e.allowDots?i.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var h="string"==typeof e?function(e,t){var r,u={},h=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,f=h.split(t.delimiter,l),p=-1,d=t.charset;if(t.charsetSentinel)for(r=0;r<f.length;++r)0===f[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[r]?d="utf-8":"utf8=%26%2310003%3B"===f[r]&&(d="iso-8859-1"),p=r,r=f.length);for(r=0;r<f.length;++r)if(r!==p){var m,g,y=f[r],v=y.indexOf("]="),b=-1===v?y.indexOf("="):v+1;-1===b?(m=t.decoder(y,i.decoder,d,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(y.slice(0,b),i.decoder,d,"key"),g=n.maybeMap(c(y.slice(b+1),t),function(e){return t.decoder(e,i.decoder,d,"value")})),g&&t.interpretNumericEntities&&"iso-8859-1"===d&&(g=a(g)),y.indexOf("[]=")>-1&&(g=s(g)?[g]:g),o.call(u,m)?u[m]=n.combine(u[m],g):u[m]=g}return u}(e,r):e,l=r.plainObjects?Object.create(null):{},f=Object.keys(h),p=0;p<f.length;++p){var d=f[p],m=u(d,h[d],r,"string"==typeof e);l=n.merge(l,m,r)}return n.compact(l)}},function(e,t,r){"use strict";var n=r(8),o=r(18),s=Object.prototype.hasOwnProperty,i={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,a(t)?t:[t])},h=Date.prototype.toISOString,l=o.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:l,formatter:o.formatters[l],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,r,o,s,i,c,h,l,p,d,m,g,y){var v=t;if("function"==typeof h?v=h(r,v):v instanceof Date?v=d(v):"comma"===o&&a(v)&&(v=n.maybeMap(v,function(e){return e instanceof Date?d(e):e}).join(",")),null===v){if(s)return c&&!g?c(r,f.encoder,y,"key"):r;v=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(v)||n.isBuffer(v))return c?[m(g?r:c(r,f.encoder,y,"key"))+"="+m(c(v,f.encoder,y,"value"))]:[m(r)+"="+m(String(v))];var b,w=[];if(void 0===v)return w;if(a(h))b=h;else{var E=Object.keys(v);b=l?E.sort(l):E}for(var S=0;S<b.length;++S){var k=b[S],_=v[k];if(!i||null!==_){var R=a(v)?"function"==typeof o?o(r,k):r:r+(p?"."+k:"["+k+"]");u(w,e(_,R,o,s,i,c,h,l,p,d,m,g,y))}}return w};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=f.filter;return("function"==typeof e.filter||a(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):a(c.filter)&&(r=c.filter);var h,l=[];if("object"!=typeof n||null===n)return"";h=t&&t.arrayFormat in i?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=i[h];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var m=0;m<r.length;++m){var g=r[m];c.skipNulls&&null===n[g]||u(l,p(n[g],g,d,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=l.join(c.delimiter),v=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),y.length>0?v+y:""}},function(e,t,r){"use strict";var n=r(61),o=r(60),s=r(18);e.exports={formats:s,parse:o,stringify:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(62),o=function(){function e(e,t){this.axios=e,this.baseUrl=t,this.workspaceUrl="/workspace",this.factoryUrl="/factory",this.devfileUrl="/devfile"}return e.prototype.getAll=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:this.workspaceUrl})},e.prototype.getAllByNamespace=function(e){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:this.workspaceUrl+"/namespace/"+e})},e.prototype.getById=function(e){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:this.workspaceUrl+"/"+e})},e.prototype.create=function(e,t){void 0===t&&(t={});var r=t.attributes,o=t.namespace,s=t.infrastructureNamespace,i=r?Object.keys(r).map(function(e){return e+":"+r[e]}):[];return this.axios.request({method:"POST",baseURL:this.baseUrl,url:this.workspaceUrl+"/devfile",data:e,params:{attribute:i,namespace:o,"infrastructure-namespace":s},paramsSerializer:function(e){return n.stringify(e,{arrayFormat:"repeat"})}})},e.prototype.update=function(e,t){return this.axios.request({method:"PUT",data:t,baseURL:this.baseUrl,url:this.workspaceUrl+"/"+e})},e.prototype.delete=function(e){return this.axios.request({method:"DELETE",baseURL:this.baseUrl,url:this.workspaceUrl+"/"+e})},e.prototype.start=function(e,t){return this.axios.request({method:"POST",data:{},baseURL:this.baseUrl,url:this.workspaceUrl+"/"+e+"/runtime",params:t||{}})},e.prototype.stop=function(e){return this.axios.request({method:"DELETE",baseURL:this.baseUrl,url:this.workspaceUrl+"/"+e+"/runtime"})},e.prototype.getSettings=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:this.workspaceUrl+"/settings"})},e.prototype.getFactoryResolver=function(e){return this.axios.request({method:"POST",baseURL:this.baseUrl,url:this.factoryUrl+"/resolver/",data:{url:e}})},e.prototype.generateSshKey=function(e,t){return this.axios.request({method:"POST",baseURL:this.baseUrl,data:{service:e,name:t},url:"/ssh/generate"})},e.prototype.createSshKey=function(e){return this.axios.request({method:"POST",data:e,baseURL:this.baseUrl,url:"/ssh/"})},e.prototype.getSshKey=function(e,t){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/ssh/"+e+"/find?name="+t})},e.prototype.getAllSshKey=function(e){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/ssh/"+e})},e.prototype.getCurrentUser=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/user"})},e.prototype.getCurrentUserProfile=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/profile"})},e.prototype.deleteSshKey=function(e,t){return this.axios.request({method:"DELETE",baseURL:this.baseUrl,url:"/ssh/"+e+"?name="+t})},e.prototype.getUserPreferences=function(e){return void 0===e&&(e=void 0),this.axios.request({method:"GET",baseURL:this.baseUrl,url:e?"/preferences?filter="+e:"/preferences"})},e.prototype.updateUserPreferences=function(e){return this.axios.request({method:"PUT",baseURL:this.baseUrl,url:"/preferences",data:e})},e.prototype.replaceUserPreferences=function(e){return this.axios.request({method:"POST",baseURL:this.baseUrl,url:"/preferences",data:e})},e.prototype.deleteUserPreferences=function(e){return void 0===e&&(e=void 0),e?this.axios.request({method:"DELETE",baseURL:this.baseUrl,url:"/preferences",data:e}):this.axios.request({method:"DELETE",baseURL:this.baseUrl,url:"/preferences"})},e.prototype.getOAuthToken=function(e){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/oauth/token?oauth_provider="+e})},e.prototype.getOAuthProviders=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/oauth"})},e.prototype.updateActivity=function(e){return this.axios.request({method:"PUT",baseURL:this.baseUrl,url:"/activity/"+e})},e.prototype.getDevfileSchema=function(e){var t={method:"GET",baseURL:this.baseUrl,url:this.devfileUrl};return e&&(t.params={version:e}),this.axios.request(t)},e.prototype.getKubernetesNamespace=function(){return this.axios.request({method:"GET",baseURL:this.baseUrl,url:"/kubernetes/namespace"})},e.prototype.getApiInfo=function(){return this.axios.request({method:"OPTIONS",baseURL:this.baseUrl})},e}();t.Resources=o},function(e,t,r){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";var n=r(20);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e){e.exports={name:"axios",version:"0.21.1",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test && bundlesize",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://github.com/axios/axios",devDependencies:{bundlesize:"^0.17.0",coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^5.2.0",sinon:"^4.5.0",typescript:"^2.8.1","url-search-params":"^0.10.0",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.10.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},function(e,t){e.exports=require("zlib")},function(e,t){e.exports=require("tty")},function(e,t,r){var n=r(69),o=r(2);(t=e.exports=r(24)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return i.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,o="  [3"+n+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push("[3"+n+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(s)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{});var s=parseInt(process.env.DEBUG_FD,10)||2;1!==s&&2!==s&&o.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var i=1===s?process.stdout:2===s?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new n.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var o=r(23);(t=new o.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var s=r(22);(t=new s.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(s);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t){var r=1e3,n=60*r,o=60*n,s=24*o,i=365.25*s;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){return a(e,s,"day")||a(e,o,"hour")||a(e,n,"minute")||a(e,r,"second")||e+" ms"}(e):function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(24)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(s=++o)}),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())},function(e,t,r){var n;try{n=r(9)("follow-redirects")}catch(e){n=function(){}}e.exports=n},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";var n=r(0),o=r(29),s=r(27),i=r(11),a=r(6),c=r(5),u=r(26).http,h=r(26).https,l=r(4),f=r(68),p=r(67),d=r(10),m=r(28),g=/https:?/;e.exports=function(e){return new Promise(function(t,r){var y=function(e){t(e)},v=function(e){r(e)},b=e.data,w=e.headers;if(w["User-Agent"]||w["user-agent"]||(w["User-Agent"]="axios/"+p.version),b&&!n.isStream(b)){if(Buffer.isBuffer(b));else if(n.isArrayBuffer(b))b=Buffer.from(new Uint8Array(b));else{if(!n.isString(b))return v(d("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));b=Buffer.from(b,"utf-8")}w["Content-Length"]=b.length}var E=void 0;e.auth&&(E=(e.auth.username||"")+":"+(e.auth.password||""));var S=s(e.baseURL,e.url),k=l.parse(S),_=k.protocol||"http:";if(!E&&k.auth){var R=k.auth.split(":");E=(R[0]||"")+":"+(R[1]||"")}E&&delete w.Authorization;var x=g.test(_),O=x?e.httpsAgent:e.httpAgent,C={path:i(k.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:w,agent:O,agents:{http:e.httpAgent,https:e.httpsAgent},auth:E};e.socketPath?C.socketPath=e.socketPath:(C.hostname=k.hostname,C.port=k.port);var A,P=e.proxy;if(!P&&!1!==P){var T=_.slice(0,-1)+"_proxy",L=process.env[T]||process.env[T.toUpperCase()];if(L){var N=l.parse(L),U=process.env.no_proxy||process.env.NO_PROXY,q=!0;if(U)q=!U.split(",").map(function(e){return e.trim()}).some(function(e){return!!e&&("*"===e||("."===e[0]&&k.hostname.substr(k.hostname.length-e.length)===e||k.hostname===e))});if(q&&(P={host:N.hostname,port:N.port,protocol:N.protocol},N.auth)){var j=N.auth.split(":");P.auth={username:j[0],password:j[1]}}}}P&&(C.headers.host=k.hostname+(k.port?":"+k.port:""),function e(t,r,n){if(t.hostname=r.host,t.host=r.host,t.port=r.port,t.path=n,r.auth){var o=Buffer.from(r.auth.username+":"+r.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+o}t.beforeRedirect=function(t){t.headers.host=t.host,e(t,r,t.href)}}(C,P,_+"//"+k.hostname+(k.port?":"+k.port:"")+C.path));var I=x&&(!P||g.test(P.protocol));e.transport?A=e.transport:0===e.maxRedirects?A=I?c:a:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),A=I?h:u),e.maxBodyLength>-1&&(C.maxBodyLength=e.maxBodyLength);var B=A.request(C,function(t){if(!B.aborted){var r=t,s=t.req||B;if(204!==t.statusCode&&"HEAD"!==s.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(f.createUnzip()),delete t.headers["content-encoding"]}var i={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:s};if("stream"===e.responseType)i.data=r,o(y,v,i);else{var a=[];r.on("data",function(t){a.push(t),e.maxContentLength>-1&&Buffer.concat(a).length>e.maxContentLength&&(r.destroy(),v(d("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,s)))}),r.on("error",function(t){B.aborted||v(m(t,e,null,s))}),r.on("end",function(){var t=Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=n.stripBOM(t))),i.data=t,o(y,v,i)})}}});B.on("error",function(t){B.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||v(m(t,e,null,B))}),e.timeout&&B.setTimeout(e.timeout,function(){B.abort(),v(d("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",B))}),e.cancelToken&&e.cancelToken.promise.then(function(e){B.aborted||(B.abort(),v(e))}),n.isStream(b)?b.on("error",function(t){v(m(t,e,null,B))}).pipe(B):B.end(b)})}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(n.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0),o=r(29),s=r(80),i=r(11),a=r(27),c=r(77),u=r(76),h=r(10);e.exports=function(e){return new Promise(function(t,r){var l=e.data,f=e.headers;n.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(d+":"+m)}var g=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),i(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};o(t,r,s),p=null}},p.onabort=function(){p&&(r(h("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){r(h("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(h(t,e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var y=(e.withCredentials||u(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;y&&(f[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(f,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)}),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),r(e),p=null)}),l||(l=null),p.send(l)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";var n=r(0),o=r(83),s=r(31),i=r(30);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,r){"use strict";var n=r(0),o=r(11),s=r(85),i=r(84),a=r(21);function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(e){c.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}}),n.forEach(["post","put","patch"],function(e){c.prototype[e]=function(t,r,n){return this.request(a(n||{},{method:e,url:t,data:r}))}}),e.exports=c},function(e,t,r){"use strict";var n=r(0),o=r(32),s=r(86),i=r(21);function a(e){var t=new s(e),r=o(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var c=a(r(30));c.Axios=s,c.create=function(e){return a(i(c.defaults,e))},c.Cancel=r(20),c.CancelToken=r(66),c.isCancel=r(31),c.all=function(e){return Promise.all(e)},c.spread=r(65),c.isAxiosError=r(64),e.exports=c,e.exports.default=c},function(e,t,r){e.exports=r(87)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(88),s=r(19),i=r(63),a=r(17),c=r(57),u=r(23),h=r(36),l=r(5),f=r(4),p=r(35);n(r(19)),n(r(17));var d=function(){function e(){}return e.getRestApi=function(e){void 0===e&&(e={});var t=e.baseUrl;t||(t="/api"),"/"===t.slice(-1)&&(t=t.substr(0,t.length-1));var r=this.createAxiosInstance(e);if(e.headers)for(var n in e.headers)e.headers.hasOwnProperty(n)&&(r.defaults.headers.common[n]=e.headers[n]);var o=e.userToken?e.userToken:e.machineToken;if(o){r.defaults.headers.common.Authorization="Bearer "+o}var a=new i.Resources(r,t);return new s.RemoteAPI(a)},e.getJsonRpcApi=function(e,t){var r=new c.WebSocketClient;return new a.WorkspaceMasterApi(r,e,t)},e.createAxiosInstance=function(e){if(!this.isItNode())return this.addLogInterceptorsIfEnabled(o.default,e),o.default;var t=this.getCertificateAuthority(e),r=process.env.http_proxy;if(r&&""!==r&&e.baseUrl){var n=f.parse(e.baseUrl);if(n.hostname&&this.shouldProxy(n.hostname)){var s={proxy:!1},i=f.parse(r),a=this.getMainProxyOptions(i),c=this.getHttpsProxyOptions(a,n.hostname,t),u=p.httpOverHttp({proxy:a}),h=p.httpOverHttps({proxy:c}),d=p.httpsOverHttp({proxy:a,ca:t}),m=p.httpsOverHttps({proxy:c,ca:t}),g=(n.protocol||"http:").startsWith("https:"),y=(i.protocol||"http:").startsWith("https:");g?s.httpsAgent=y?m:d:s.httpAgent=y?h:u;var v=o.default.create(s);return this.addLogInterceptorsIfEnabled(v,e),v}}if(t){v=o.default.create({httpsAgent:new l.Agent({ca:t})});return this.addLogInterceptorsIfEnabled(v,e),v}return this.addLogInterceptorsIfEnabled(o.default,e),o.default},e.isItNode=function(){return"undefined"!=typeof process&&void 0!==process.versions.node},e.addLogInterceptorsIfEnabled=function(e,t){t.loggingEnabled&&(e.interceptors.request.use(function(e){return console.log("Starting Request",e),e}),e.interceptors.response.use(function(e){return console.log("Response:",e),e}))},e.getCertificateAuthority=function(e){var t=[];if(e.ssCrtPath&&u.existsSync(e.ssCrtPath)&&t.push(u.readFileSync(e.ssCrtPath)),e.publicCrtPath&&u.existsSync(e.publicCrtPath))for(var r=0,n=u.readdirSync(e.publicCrtPath);r<n.length;r++){var o=n[r];if(o.endsWith(".crt")){var s=h.join(e.publicCrtPath,o);t.push(u.readFileSync(s))}}return t.length>0?t:void 0},e.getMainProxyOptions=function(e){var t=Number(e.port);return{host:e.hostname,port:""===e.port||isNaN(t)?3128:t,proxyAuth:e.auth&&""!==e.auth?e.auth:void 0}},e.getHttpsProxyOptions=function(e,t,r){return{host:e.host,port:e.port,proxyAuth:e.proxyAuth,servername:t,ca:r}},e.shouldProxy=function(e){var t=process.env.no_proxy||process.env.NO_PROXY;return!(t?t.split(",").map(function(e){return e.trim()}):[]).some(function(t){return!!t&&("*"===t||("."===t[0]&&e.substr(e.length-t.length)===t||e===t))})},e}();t.default=d}])});
//# sourceMappingURL=server.js.map